I"Ã<h2 id="æ–‡ä»¶ç›®å½•ç»“æ„">æ–‡ä»¶ç›®å½•ç»“æ„ï¼š</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/nginx
/nginx/conf
/nginx/conf/nginx.conf         #é»˜è®¤nginxé…ç½®æ–‡ä»¶
/nginx/conf/vhost
/nginx/conf/vhost/localhost.conf    #
/nginx/conf/vhost/*.conf       #å„è™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶
</code></pre></div></div>

<p>ä»¥ä¸‹åˆ—å‡ºä¸‰ä¸ªä¸»è¦é…ç½®æ–‡ä»¶å†…å®¹ï¼š</p>

<pre class="line-numbers">
    <code class="language-nginx">
    #ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
    #é»˜è®¤é…ç½®æ–‡ä»¶
    #nginx.conf
    #user  nobody;
    worker_processes  1;
    #error_log  logs/error.log;
    #error_log  logs/error.log  notice;
    #error_log  logs/error.log  info;
    #pid        logs/nginx.pid;
    events {
        worker_connections  1024;
    }
    http {
        include       mime.types;
        default_type  application/octet-stream;
        autoindex        on;
        sendfile        on;
        keepalive_timeout  65;
        include tools-*.conf;  #å¼•å…¥å„ç§é…ç½®æ–‡ä»¶
        include vhost/*.conf; 
    }
    #==============================

    #========================
    #é»˜è®¤è®¿é—®æ§åˆ¶
    #localhost.conf
    server {
        listen 80; # IPv4
        server_name localhost;
        ## Parameterization using hostname of access and log filenames.
        access_log logs/localhost_access.log;
        error_log logs/localhost_error.log;
        ## Root and index files.
        root D:/xampp/htdocs;
        index  index.php index.html index.htm;
        ## If no favicon exists return a 204 (no content error).
        location = /favicon.ico {
            try_files $uri =204;
            log_not_found off;
            access_log off;
        }
        ## Don't log robots.txt requests.
        location = /robots.txt {
            allow all;
            log_not_found off;
            access_log off;
        }
        ## Try the requested URI as files before handling it to PHP.
            location / {
        
            } # / location

            ## Regular PHP processing.
            location ~ \.php$ {
                try_files  $uri =404;
                fastcgi_pass   127.0.0.1:9000;
                fastcgi_index  index.php;
                fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
                include        fastcgi_params;
            }

            ## Static files
            location ~* \.(?:css|gif|htc|ico|js|jpe?g|png|swf)$ {
                expires max;
                log_not_found off;
                ## No need to bleed constant updates. Send the all shebang in one
                ## fell swoop.
                tcp_nodelay off;
                ## Set the OS file cache.
                open_file_cache max=1000 inactive=120s;
                open_file_cache_valid 45s;
                open_file_cache_min_uses 2;
                open_file_cache_errors off;
            }

            ## Keep a tab on the 'big' static files.
            location ~* ^.+\.(?:ogg|pdf|pptx?)$ {
                expires 30d;
                ## No need to bleed constant updates. Send the all shebang in one
                ## fell swoop.
                tcp_nodelay off;
            }
            #å­ç›®å½•è®¿é—® rewriteæ–¹å¼   
            #   http://localhost/drupal/user         ä¼šrewriteåˆ°       http://localhost/drupal/index.php?q=user
            location /drupal{
                    #ä½¿ç”¨â€œ-fâ€å’Œâ€œ!-fâ€è¿ç®—ç¬¦æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
                    #ä½¿ç”¨â€œ-dâ€å’Œâ€œ!-dâ€è¿ç®—ç¬¦æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨
                if (!-f $request_filename) {
                    rewrite  ^/drupal/(.*)$  /drupal/index.php?q=$1  last;
                    break;
                }
                if (!-d $request_filename) {
                    rewrite  ^/drupal/(.*)$  /drupal/index.php?q=$1  last;
                    break;
                }
            }
    } # end http server
    #==================================


    #===================================
    #  www.drupal.my    è™šæ‹Ÿè·Ÿå¾„æŒ‡å‘  localhost/drupal
    #www.drupal.my.conf
    server {
        listen   80; ## listen for ipv4; this line is default and implied

        root D:/xampp/htdocs/drupal;
        index index.html index.php;

        server_name www.drupal.my;
        location / {
                index  index.php index.html;
                #rewrite
                # ä½¿ç”¨â€œ-eâ€å’Œâ€œ!-eâ€è¿ç®—ç¬¦æ£€æŸ¥æ–‡ä»¶ã€ç›®å½•æˆ–ç¬¦å·é“¾æ¥æ˜¯å¦å­˜åœ¨ï¼›
                if (!-e $request_filename) {
                    rewrite ^/(.*)$ /index.php?q=$1 last;
                }
            }
        
        error_page 404 /404.php;

        location ~ \.php$ {
            try_files  $uri =404;
            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
            include        fastcgi_params;
        }
        #rewrite rules
        #include vhost/www.drupal.my.rules;

    
    }
</code>
</pre>

:ET