I"]§<blockquote>
  <p><a href="/2020/02/02/0.magento-menu.html">Magento 2 å¼€å‘å†…å®¹ç›®å½•</a></p>
</blockquote>

<p>é€šè¿‡ Magento 2 çš„æ¨¡å‹å¯ä»¥å¾ˆå®¹æ˜“ç®¡ç†æ•°æ®åº“æ•°æ®ï¼Œä¸éœ€è¦å†™å¾ˆå¤šä»£ç æ¥å®ç°åŸºç¡€çš„ CRUDã€‚CRUDä»£è¡¨æ–°å¢(create)ã€è¯»å–(read)ã€æ›´æ–°(update)å’Œåˆ é™¤(delete)ã€‚æœ¬èŠ‚ä¸»è¦äº†è§£å¦‚ä½•åˆ›å»ºæ•°æ®è¡¨ã€æ¨¡å‹(model)ã€èµ„æºæ¨¡å‹(resource model)å’Œèµ„æºæ¨¡å‹é›†åˆ(resource model collection)åŠæ•°æ®åº“çš„ç›¸å…³æ“ä½œã€‚</p>

<p>å¼€å§‹ä¹‹å‰å…ˆå®šå¥½è¦ç”¨åˆ°çš„æ•°æ®è¡¨ï¼Œè¡¨å <code class="language-plaintext highlighter-rouge">aqrun_helloworld_post</code> ,å­—æ®µå¦‚ä¸‹ï¼š</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">post_id</code> - æ–‡ç« çš„å”¯ä¸€æ ‡è¯†ID</li>
  <li><code class="language-plaintext highlighter-rouge">name</code> - æ–‡ç« æ ‡é¢˜</li>
  <li><code class="language-plaintext highlighter-rouge">url_key</code> - URL</li>
  <li><code class="language-plaintext highlighter-rouge">post_content</code> - æ–‡ç« æ­£æ–‡</li>
  <li><code class="language-plaintext highlighter-rouge">tags</code> - æ ‡ç­¾</li>
  <li><code class="language-plaintext highlighter-rouge">status</code> - çŠ¶æ€</li>
  <li><code class="language-plaintext highlighter-rouge">featured_image</code> - å›¾ç‰‡</li>
  <li><code class="language-plaintext highlighter-rouge">created_at</code> - åˆ›å»ºæ—¶é—´</li>
  <li><code class="language-plaintext highlighter-rouge">updated_at</code> - æ›´æ–°æ—¶é—´</li>
</ul>

<h2 id="åˆ›å»ºæ¨¡å‹æœ‰å¦‚ä¸‹æ­¥éª¤">åˆ›å»ºæ¨¡å‹æœ‰å¦‚ä¸‹æ­¥éª¤ï¼š</h2>

<ul>
  <li>1 å®‰è£…è„šæœ¬ï¼ˆSetup Scriptï¼‰</li>
  <li>2 åˆ›å»ºæ¨¡å‹ï¼ˆModel)</li>
  <li>3 åˆ›å»ºèµ„æºæ¨¡å‹ï¼ˆResource Modelï¼‰</li>
  <li>4 åˆ›å»ºèµ„æºæ¨¡å‹é›†åˆï¼ˆResource Model Collectionï¼‰</li>
  <li>5 å·¥å‚å¯¹è±¡ï¼ˆFactory Objectï¼‰</li>
</ul>

<h2 id="ç¬¬ä¸€æ­¥-æ·»åŠ å®‰è£…è„šæœ¬">ç¬¬ä¸€æ­¥ æ·»åŠ å®‰è£…è„šæœ¬</h2>

<p>é¦–å…ˆä¸ºæˆ‘ä»¬çš„æ¨¡å‹åˆ›å»ºæ•°æ®è¡¨ï¼Œéœ€è¦å¢åŠ å®‰è£…é…ç½®æ–‡ä»¶</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app/code/Aqrun/HelloWorld/Setup/InstallSchema.php
</code></pre></div></div>

<p>è¿™ä¸ªæ–‡ä»¶ä¼šåœ¨æ¨¡å—å®‰è£…æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚ä½¿ç”¨å¦‚ä¸‹ä»£ç åˆ›å»ºä¸Šé¢çš„æ–‡ç« è¡¨</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">namespace</span> <span class="nn">Aqrun\HelloWorld\Setup</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Magento\Framework\DB\Ddl\Table</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">InstallSchema</span> <span class="k">implements</span> <span class="err">\</span><span class="nc">Aqrun\Framework\Setup\InstallSchemaInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">install</span><span class="p">(</span>
        <span class="err">\</span><span class="nc">Magento\Framework\Setup\SchemaSetupInterface</span> <span class="nv">$setup</span><span class="p">,</span>
        <span class="err">\</span><span class="nc">Magento\Framework\Setup\ModuleContextInterface</span> <span class="nv">$context</span>
    <span class="p">){</span>
        <span class="nv">$installer</span> <span class="o">=</span> <span class="nv">$setup</span><span class="p">;</span>
        <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">startSetup</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$intaller</span><span class="o">-&gt;</span><span class="nf">tableExists</span><span class="p">(</span><span class="s1">'aqrun_helloworld_post'</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">newTable</span><span class="p">(</span>
                <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getTable</span><span class="p">(</span><span class="s1">'aqrun_helloworld_post'</span><span class="p">)</span>
            <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                <span class="s1">'post_id'</span><span class="p">,</span>
                <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_INTERGER</span><span class="p">,</span>
                <span class="kc">null</span><span class="p">,</span>
                <span class="p">[</span>
                    <span class="s1">'identity'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="s1">'nllable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="s1">'primary'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="s1">'unsigned'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
                <span class="p">],</span>
                <span class="s1">'Post ID'</span>
            <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                <span class="s1">'name'</span><span class="p">,</span>
                <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TEXT</span><span class="p">,</span>
                <span class="mi">255</span><span class="p">,</span>
                <span class="p">[</span><span class="s1">'nullable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">],</span>
                <span class="s1">'Post name'</span>
            <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                <span class="s1">'url_key'</span><span class="p">,</span>
                <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TEXT</span><span class="p">,</span>
                <span class="mi">255</span><span class="p">,</span>
                <span class="p">[</span><span class="s1">'nullable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">],</span>
                <span class="s1">'Post URL Key'</span>
            <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                <span class="s1">'post_content'</span><span class="p">,</span>
                <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TEXT</span><span class="p">,</span>
                <span class="s1">'64k'</span><span class="p">,</span>
                <span class="p">[],</span>
                <span class="s1">'Post Content'</span>
            <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                <span class="s1">'tags'</span><span class="p">,</span>
                <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TEXT</span><span class="p">,</span>
                <span class="mi">255</span><span class="p">,</span>
                <span class="p">[],</span>
                <span class="s1">'Post Tags'</span>
            <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                <span class="s1">'status'</span><span class="p">,</span>
                <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_INTEGER</span><span class="p">,</span>
                <span class="mi">1</span><span class="p">,</span>
                <span class="p">[],</span>
                <span class="s1">'Post Status'</span>
            <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                <span class="s1">'featured_image'</span><span class="p">,</span>
                <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TEXT</span><span class="p">,</span>
                <span class="mi">255</span><span class="p">,</span>
                <span class="p">[],</span>
                <span class="s1">'Post Featured Image'</span>
            <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                <span class="s1">'created_at'</span><span class="p">,</span>
                <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TIMESTAMP</span><span class="p">,</span>
                <span class="kc">null</span><span class="p">,</span>
                <span class="p">[</span><span class="s1">'nullable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span> <span class="s1">'default'</span> <span class="o">=&gt;</span> <span class="nc">Table</span><span class="o">::</span><span class="no">TIMESTAMP_INIT</span><span class="p">],</span>
                <span class="s1">'Created At'</span>
            <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                <span class="s1">'updated_at'</span><span class="p">,</span>
                <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TIMESTAMP</span><span class="p">,</span>
                <span class="kc">null</span><span class="p">,</span>
                <span class="p">[</span><span class="s1">'nullable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span> <span class="s1">'default'</span> <span class="o">=&gt;</span> <span class="nc">Table</span><span class="o">::</span><span class="no">TIMESTAMP_INIT_UPDATE</span><span class="p">],</span>
                <span class="s1">'Updated At'</span>
            <span class="p">)</span><span class="o">-&gt;</span><span class="nf">setComment</span><span class="p">(</span><span class="s1">'Post Table'</span><span class="p">);</span>

            <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">createTable</span><span class="p">(</span><span class="nv">$table</span><span class="p">);</span>
            <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">addIndex</span><span class="p">(</span>
                <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getTable</span><span class="p">(</span><span class="s1">'aqrun_helloworld_post'</span><span class="p">),</span>
                <span class="nv">$setup</span><span class="o">-&gt;</span><span class="nf">getIdxName</span><span class="p">(</span>
                    <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getTable</span><span class="p">(</span><span class="s1">'mageplaza_helloworld_post'</span><span class="p">),</span>
                    <span class="p">[</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'url_key'</span><span class="p">,</span> <span class="s1">'post_content'</span><span class="p">,</span> <span class="s1">'tags'</span><span class="p">,</span> <span class="s1">'featured_image'</span><span class="p">],</span>
                    <span class="err">\</span><span class="nc">Magento\Framework\DB\Adapter\AdapterInterface</span><span class="o">::</span><span class="no">INDEX_TYPE_FULLTEXT</span>
                <span class="p">),</span>
                <span class="p">[</span><span class="s1">'name'</span><span class="p">,</span><span class="s1">'url_key'</span><span class="p">,</span><span class="s1">'post_content'</span><span class="p">,</span><span class="s1">'tags'</span><span class="p">,</span><span class="s1">'featured_image'</span><span class="p">,],</span>
                <span class="err">\</span><span class="nc">Magento\Framework\DB\Adapter\AdapterInterface</span><span class="o">::</span><span class="no">INDEX_TYPE_FULLTEXT</span>
            <span class="p">);</span>

        <span class="p">}</span> <span class="c1">//if</span>

        <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">endSetup</span><span class="p">();</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ä»¥ä¸Šä»£ç å®ç°å¦‚ä½•åˆ›å»ºæ•°æ®è¡¨ã€‚è¦æ³¨æ„çš„æ˜¯ç³»ç»Ÿä¼šåœ¨æ¨¡å—ç¬¬ä¸€æ¬¡å®‰è£…æ—¶è‡ªåŠ¨è¿è¡Œè¿™ä¸ªæ–‡ä»¶ã€‚å¦‚æœæ¨¡å—å·²ç»å®‰è£…ï¼Œè¿™æ—¶éœ€è¦æ›´æ–°æ¨¡å—å°±è¦æŠŠåˆ›å»ºè¡¨çš„ä»£ç å†™åœ¨ <code class="language-plaintext highlighter-rouge">UpgradeSchema.php</code> æ–‡ä»¶ï¼Œå¹¶ä¸”ä¿®æ”¹ <code class="language-plaintext highlighter-rouge">module.xml</code> æ–‡ä»¶çš„ <code class="language-plaintext highlighter-rouge">setup_version</code> å®‰è£…ç‰ˆæœ¬å·å€¼ï¼Œæ”¹å¤§ä¸€äº›ï¼Œ<code class="language-plaintext highlighter-rouge">app/code/Aqrun/HelloWorld/etc/module.xml</code>ã€‚</p>

<p>å†…å®¹å¦‚ï¼š</p>

<p>æ–‡ä»¶ï¼š <code class="language-plaintext highlighter-rouge">app/code/Aqrun/HelloWorld/etc/module.xml</code></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;config</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:noNamespaceSchemaLocation=</span><span class="s">"urn:magento:framework:Module/etc/module.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;module</span> <span class="na">name=</span><span class="s">"Aqrun_HelloWorld"</span> <span class="na">setup_version=</span><span class="s">"1.1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/module&gt;</span>
<span class="nt">&lt;/config&gt;</span>
</code></pre></div></div>

<p>æ–‡ä»¶ï¼š <code class="language-plaintext highlighter-rouge">app/code/Aqrun/HelloWorld/Setup/UpgradeSchema.php</code></p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">namespace</span> <span class="nn">Aqrun\HelloWorld\Setup</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Magento\Framework\Setup\UpgradeSchemaInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\Setup\SchemaSetupInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\Setup\ModuleContextInterface</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">UpgradeSchema</span> <span class="kd">implements</span> <span class="nc">UpgradeSchemaInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">upgrade</span><span class="p">(</span>
        <span class="kt">SchemaSetupInterface</span> <span class="nv">$setup</span><span class="p">,</span>
        <span class="kt">ModuleContextInterface</span> <span class="nv">$context</span>
    <span class="p">){</span>
        <span class="nv">$installer</span> <span class="o">=</span> <span class="nv">$setup</span><span class="p">;</span>
        <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">startSetup</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">version_compare</span><span class="p">(</span><span class="nv">$context</span><span class="o">-&gt;</span><span class="nf">getVersion</span><span class="p">(),</span> <span class="s1">'1.1.0'</span><span class="p">,</span> <span class="s1">'&lt;'</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">tableExists</span><span class="p">(</span><span class="s1">'aqrun_helloworld_post'</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$table</span> <span class="o">=</span> <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">newTable</span><span class="p">(</span>
                    <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getTable</span><span class="p">(</span><span class="s1">'aqrun_helloworld_post'</span><span class="p">)</span>
                <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                    <span class="s1">'post_id'</span><span class="p">,</span>
                    <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_INTERGER</span><span class="p">,</span>
                    <span class="kc">null</span><span class="p">,</span>
                    <span class="p">[</span>
                        <span class="s1">'identity'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="s1">'nllable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
                        <span class="s1">'primary'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="s1">'unsigned'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="p">],</span>
                    <span class="s1">'Post ID'</span>
                <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                    <span class="s1">'name'</span><span class="p">,</span>
                    <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TEXT</span><span class="p">,</span>
                    <span class="mi">255</span><span class="p">,</span>
                    <span class="p">[</span><span class="s1">'nullable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">],</span>
                    <span class="s1">'Post name'</span>
                <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                    <span class="s1">'url_key'</span><span class="p">,</span>
                    <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TEXT</span><span class="p">,</span>
                    <span class="mi">255</span><span class="p">,</span>
                    <span class="p">[</span><span class="s1">'nullable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">],</span>
                    <span class="s1">'Post URL Key'</span>
                <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                    <span class="s1">'post_content'</span><span class="p">,</span>
                    <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TEXT</span><span class="p">,</span>
                    <span class="s1">'64k'</span><span class="p">,</span>
                    <span class="p">[],</span>
                    <span class="s1">'Post Content'</span>
                <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                    <span class="s1">'tags'</span><span class="p">,</span>
                    <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TEXT</span><span class="p">,</span>
                    <span class="mi">255</span><span class="p">,</span>
                    <span class="p">[],</span>
                    <span class="s1">'Post Tags'</span>
                <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                    <span class="s1">'status'</span><span class="p">,</span>
                    <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_INTEGER</span><span class="p">,</span>
                    <span class="mi">1</span><span class="p">,</span>
                    <span class="p">[],</span>
                    <span class="s1">'Post Status'</span>
                <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                    <span class="s1">'featured_image'</span><span class="p">,</span>
                    <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TEXT</span><span class="p">,</span>
                    <span class="mi">255</span><span class="p">,</span>
                    <span class="p">[],</span>
                    <span class="s1">'Post Featured Image'</span>
                <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                    <span class="s1">'created_at'</span><span class="p">,</span>
                    <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TIMESTAMP</span><span class="p">,</span>
                    <span class="kc">null</span><span class="p">,</span>
                    <span class="p">[</span><span class="s1">'nullable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span> <span class="s1">'default'</span> <span class="o">=&gt;</span> <span class="nc">Table</span><span class="o">::</span><span class="no">TIMESTAMP_INIT</span><span class="p">],</span>
                    <span class="s1">'Created At'</span>
                <span class="p">)</span><span class="o">-&gt;</span><span class="nf">addColumn</span><span class="p">(</span>
                    <span class="s1">'updated_at'</span><span class="p">,</span>
                    <span class="nc">Table</span><span class="o">::</span><span class="no">TYPE_TIMESTAMP</span><span class="p">,</span>
                    <span class="kc">null</span><span class="p">,</span>
                    <span class="p">[</span><span class="s1">'nullable'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span> <span class="s1">'default'</span> <span class="o">=&gt;</span> <span class="nc">Table</span><span class="o">::</span><span class="no">TIMESTAMP_INIT_UPDATE</span><span class="p">],</span>
                    <span class="s1">'Updated At'</span>
                <span class="p">)</span><span class="o">-&gt;</span><span class="nf">setComment</span><span class="p">(</span><span class="s1">'Post Table'</span><span class="p">);</span>

                <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">createTable</span><span class="p">(</span><span class="nv">$table</span><span class="p">);</span>
                <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">addIndex</span><span class="p">(</span>
                    <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getTable</span><span class="p">(</span><span class="s1">'aqrun_helloworld_post'</span><span class="p">),</span>
                    <span class="nv">$setup</span><span class="o">-&gt;</span><span class="nf">getIdxName</span><span class="p">(</span>
                        <span class="nv">$installer</span><span class="o">-&gt;</span><span class="nf">getTable</span><span class="p">(</span><span class="s1">'aqrun_helloworld_post'</span><span class="p">),</span>
                        <span class="p">[</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'url_key'</span><span class="p">,</span> <span class="s1">'post_content'</span><span class="p">,</span> <span class="s1">'tags'</span><span class="p">,</span> <span class="s1">'featured_image'</span><span class="p">],</span>
                        <span class="err">\</span><span class="nc">Magento\Framework\DB\Adapter\AdapterInterface</span><span class="o">::</span><span class="no">INDEX_TYPE_FULLTEXT</span>
                    <span class="p">),</span>
                    <span class="p">[</span><span class="s1">'name'</span><span class="p">,</span><span class="s1">'url_key'</span><span class="p">,</span><span class="s1">'post_content'</span><span class="p">,</span><span class="s1">'tags'</span><span class="p">,</span><span class="s1">'featured_image'</span><span class="p">,],</span>
                    <span class="err">\</span><span class="nc">Magento\Framework\DB\Adapter\AdapterInterface</span><span class="o">::</span><span class="no">INDEX_TYPE_FULLTEXT</span>
                <span class="p">);</span>
            <span class="p">}</span> <span class="c1">// if not table exists</span>
        <span class="p">}</span><span class="c1">// if version compare</span>
    <span class="p">}</span> <span class="c1">//</span>

<span class="p">}</span>

</code></pre></div></div>

<p>ç„¶åè¿è¡Œæ›´æ–°çš„å‘½ä»¤ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php bin/magento setup:upgrade
</code></pre></div></div>

<p>æ›´æ–°å®Œæˆå¯ä»¥ç»§ç»­æ‰§è¡Œé™æ€å†…å®¹å‘å¸ƒå‘½ä»¤ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php bin/magento setup:static-content:deploy
</code></pre></div></div>

<p>ç°åœ¨æ•°æ®åº“ä¸­åº”è¯¥å°±æœ‰ <code class="language-plaintext highlighter-rouge">aqrun_helloworld_post</code> æ•°æ®è¡¨ï¼Œå­—æ®µå’Œä¸Šé¢ä¸€æ ·ã€‚å¦‚æœæ²¡æœ‰åˆ›å»ºæˆåŠŸï¼Œæˆ–è®¸æ˜¯ç”±äºåœ¨ä½ æ·»åŠ å†…å®¹åˆ° InstallSchema.php æ–‡ä»¶å‰è¿è¡Œè¿‡ä¸Šé¢çš„å‘½ä»¤ã€‚è¿™æ—¶éœ€è¦æ‰‹åŠ¨æ¸…é™¤æ•°æ®è¡¨ä¿¡æ¯ï¼Œåœ¨ <code class="language-plaintext highlighter-rouge">setup_module</code> è¡¨æ‰¾åˆ°å¹¶åˆ é™¤ <code class="language-plaintext highlighter-rouge">aqrun_helloworld_post</code> è¿™ä¸€è¡Œæ•°æ®ã€‚ç„¶åå†è¿è¡Œä¸Šé¢çš„å‘½ä»¤è¯•ä¸‹ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">InstallSchema.php</code> æ–‡ä»¶æ˜¯ç”¨æ¥åˆ›å»ºæ•°æ®è¡¨ç»“æ„çš„ï¼Œ å¦‚æœè¦åœ¨å®‰è£…æ—¶æ·»åŠ æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">InstallData.php</code> æ–‡ä»¶ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app/code/Aqrun/HelloWorld/Setup/InstallData.php
</code></pre></div></div>

<p>å¦‚ä½•ä½¿ç”¨å¯ä»¥åˆ°ç³»ç»Ÿæ‰¾å¦‚ä¸‹æ–‡ä»¶æŸ¥çœ‹ï¼š</p>

<ul>
  <li>vendor/magento/module-tax/Setup/InstallData.php</li>
  <li>vender/magento/module-customer/Setup/InstallData.php</li>
  <li>vendor/magento/module-catalog/Setup/InstallData.php</li>
</ul>

<p>ä¸Šé¢æåˆ°è¿™äº›å®‰è£…æ–‡ä»¶æ˜¯æ¨¡å—ç¬¬ä¸€æ¬¡å®‰è£…æ—¶ä½¿ç”¨çš„ï¼Œå¦‚æœè¦ä¿®æ”¹æ•°æ®è¡¨å¹¶æ›´æ–°æ¨¡å—ï¼Œè¦ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">UpgradeSchema.php</code> å’Œ <code class="language-plaintext highlighter-rouge">UpgradeData.php</code>ã€‚</p>

<h2 id="ç¬¬äºŒæ­¥-åˆ›å»ºæ¨¡å‹">ç¬¬äºŒæ­¥ åˆ›å»ºæ¨¡å‹</h2>

<p>æ¨¡å‹æ˜¯MVCæ¶æ„ä¸­å¾ˆå¤§ä¸€å¨å†…å®¹ã€‚Magento 2 æ¨¡å‹æœ‰å¾ˆå¤šä¸åŒçš„åŠŸèƒ½å¦‚æ•°æ®ç®¡ç†ã€å®‰è£…æˆ–æ›´æ–°æ¨¡å—ã€‚è¿™é‡Œåªè®¨è®ºæ•°æ®çš„CRUDæ“ä½œã€‚æˆ‘ä»¬éœ€è¦åˆ›å»ºæ¨¡å‹ã€èµ„æºæ¨¡å‹ã€èµ„æºæ¨¡å‹é›†åˆæ¥ç®¡ç† <code class="language-plaintext highlighter-rouge">aqrun_helloworld_post</code> è¡¨çš„æ•°æ®ã€‚</p>

<p>åˆ›å»ºæ¨¡å‹æ–‡ä»¶ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app/code/Aqrun/HelloWorld/Model/Post.php
</code></pre></div></div>

<p>å†…å®¹ï¼š</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">namespace</span> <span class="nn">Aqrun\HelloWorld\Model</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Magento\Framework\Model\AbstractModel</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Magento\Framework\DataObject\IdentityInterface</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">Post</span> <span class="kd">extends</span> <span class="nc">AbstractModel</span> <span class="kd">implements</span> <span class="nc">IdentityInterface</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="no">CACHE_TAG</span> <span class="o">=</span> <span class="s1">'aqrun_helloworld_post'</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$_cacheTag</span> <span class="o">=</span> <span class="s1">'aqrun_helloworld_post'</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$_eventPrefix</span> <span class="o">=</span> <span class="s1">'aqrun_helloworld_post'</span><span class="p">;</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="n">_construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">_init</span><span class="p">(</span><span class="s1">'Aqrun\HelloWorld\Model\ResourceModel\Post'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">getIdentities</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="k">self</span><span class="o">::</span><span class="no">CACHE_TAG</span> <span class="mf">.</span> <span class="s1">'_'</span> <span class="mf">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getId</span><span class="p">()];</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">getDefaultValues</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$values</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">return</span> <span class="nv">$values</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æ¨¡å‹ç»§æ‰¿è‡ª <code class="language-plaintext highlighter-rouge">AbstractModel</code> ç±» <code class="language-plaintext highlighter-rouge">Magento\Framework\Model\AbstractModel</code> å¹¶å®ç°æ¥å£ <code class="language-plaintext highlighter-rouge">Magento\Framework\DataObject\IdentityInterface</code>ï¼Œ <code class="language-plaintext highlighter-rouge">IdentityInterface</code> å¼ºåˆ¶æ¨¡å‹ç±»å¿…é¡»å®ç°è¿”å›æ¨¡å‹å”¯ä¸€IDçš„ <code class="language-plaintext highlighter-rouge">getIdentities()</code> æ–¹æ³•ã€‚å¦‚æœåœ¨æ•°æ®åº“å†…å®¹ä¿®æ”¹ä¹‹åéœ€è¦ç¼“å­˜æ¸…é™¤ä¹‹ç±»çš„æ“ä½œæ¥æ˜¾ç¤ºå‰ç«¯å†…å®¹å°±å¿…é¡»ä½¿ç”¨è¿™ä¸ªæ¥å£ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">__construct()</code> æ„é€ æ–¹æ³•åœ¨æ¨¡å‹åˆå§‹åŒ–æ—¶ä¼šæ‰§è¡Œï¼Œæ¯ä¸€ä¸ªCURDæ¨¡å‹éƒ½å¿…é¡»ä½¿ç”¨æ„é€ æ–¹æ³•è°ƒç”¨ <code class="language-plaintext highlighter-rouge">_init()</code> æ–¹æ³•ã€‚<code class="language-plaintext highlighter-rouge">_init()</code> æ–¹æ³•å®šä¹‰äº†å®é™…è·å–æ•°æ®åº“ä¿¡æ¯çš„èµ„æºæ¨¡å‹ã€‚å¦‚ä»£ç æˆ‘ä»¬å®šä¹‰äº†èµ„æºæ¨¡å‹ï¼š `Aqrun\Post\Model\ResourceModel\Postâ€™ã€‚æœ€åæ˜¯ä¸€äº›å˜é‡ï¼š</p>

<ul>
  <li>$_eventPrefix è§¦å‘äº‹ä»¶æ—¶çš„å‰ç¼€</li>
  <li>$_eventObject  è·å–äº‹ä»¶å¯¹è±¡çš„åç§°</li>
  <li>$_cacheTag ç¼“å­˜ç”¨çš„å”¯ä¸€ID</li>
</ul>

<h2 id="ç¬¬ä¸‰æ­¥-åˆ›å»ºèµ„æºæ¨¡å‹">ç¬¬ä¸‰æ­¥ åˆ›å»ºèµ„æºæ¨¡å‹</h2>

<p>å¦‚ä½ æ‰€è§ï¼Œæ¨¡å‹æ–‡ä»¶åŒ…å«æ‰€æœ‰æ•°æ®åº“ç›¸å…³å¤„ç†é€»è¾‘ï¼Œå¹¶ä¸è¿è¡Œå®é™…çš„SQLæ“ä½œï¼Œè€Œè¿™äº›æ“ä½œæ˜¯åœ¨èµ„æºæ¨¡å‹ä¸­å®šä¹‰çš„ã€‚ç°åœ¨æ·»åŠ èµ„æºæ¨¡å‹ï¼š<code class="language-plaintext highlighter-rouge">app/code/Aqrun/HelloWorld/Model/ResourceModel/Post.php</code></p>

<p>ä»£ç ï¼š</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">namespace</span> <span class="nn">Aqrun\Helloworld\Model\ResourceModel</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">Post</span> <span class="k">extends</span> <span class="err">\</span><span class="nc">Magento\Framework\Model\ResourceModel\Db\AbstractDb</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span>
        <span class="err">\</span><span class="nc">Magento</span><span class="err">ã€</span><span class="nc">Framework\Model\ResouceModel\Db\Context</span> <span class="nv">$context</span>
    <span class="p">){</span>
        <span class="k">parent</span><span class="o">::</span><span class="nf">__construct</span><span class="p">(</span><span class="nv">$context</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="n">_construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">init</span><span class="p">(</span><span class="s1">'aqrun_helloworld_post'</span><span class="p">,</span> <span class="s1">'post_id'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>èµ„æºæ¨¡å‹å¿…é¡»ç»§æ‰¿è™šç±» <code class="language-plaintext highlighter-rouge">\Magento\Framework\Model\ResourceModel\Db\AbstractDb</code>ã€‚è¿™ä¸ªç±»åŒ…å«ä»æ•°æ®åº“è·å–ä¿¡æ¯çš„åŠŸèƒ½é€»è¾‘ã€‚</p>

<p>å’Œæ¨¡å‹ç±»ä¸€æ ·ï¼Œèµ„æºæ¨¡å‹ç±»å¿…é¡»æœ‰ <code class="language-plaintext highlighter-rouge">__construct()</code> æ„é€ æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨å®šä¹‰äº†æ•°æ®è¡¨åå’Œä¸»é”®çš„ <code class="language-plaintext highlighter-rouge">_init()</code> å‡½æ•°ã€‚ä¸Šé¢ä»£ç æˆ‘ä»¬çš„è¡¨æ˜¯ <code class="language-plaintext highlighter-rouge">aqrun_helloworld_post</code> ä¸»é”®ä¸º <code class="language-plaintext highlighter-rouge">post_id</code>ã€‚</p>

<h2 id="ç¬¬å››æ­¥-åˆ›å»ºèµ„æºæ¨¡å‹é›†åˆ---è·å–æ¨¡å‹é›†åˆ">ç¬¬å››æ­¥ åˆ›å»ºèµ„æºæ¨¡å‹é›†åˆ - è·å–æ¨¡å‹é›†åˆ</h2>

<p>æ¨¡å‹é›†åˆå¯ä»¥çœ‹ä½œæ˜¯èµ„æºæ¨¡å‹ï¼Œä½†å¯ä»¥ç­›é€‰å’Œè·å–è¡¨æ•°æ®çš„é›†åˆã€‚é›†åˆæ¨¡å‹ç±»å®šä¹‰åœ¨ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app/code/Aqrun/HelloWorld/Model/ResourceModel/Post/Collection.php
</code></pre></div></div>

<p>ä»£ç ï¼š</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">namespace</span> <span class="nn">Aqrun\HelloWorld\Model\ResourceModel\Post</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">Collection</span> <span class="k">extends</span> <span class="err">\</span><span class="nc">Magento\Framework\Model\ResourceModel\Db\Collection\AbstractCollection</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$_idFieldName</span> <span class="o">=</span> <span class="s1">'post_id'</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$_eventPrefix</span> <span class="o">=</span> <span class="s1">'aqrun_helloworld_post_collection'</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$_eventObject</span> <span class="o">=</span> <span class="s1">'post_collection'</span><span class="p">;</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="n">_construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">_init</span><span class="p">(</span><span class="err">\</span><span class="nc">Aqrun\HelloWorld\Model\Post</span><span class="o">::</span><span class="n">class</span><span class="p">,</span> <span class="err">\</span><span class="nc">Aqrun\HelloWorld\Model\ResourceModel\Post</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>é›†åˆç±»éœ€è¦ç»§æ‰¿ç±»ï¼š <code class="language-plaintext highlighter-rouge">\Magento\Framework\Model\ResourceModel\Db\Collection\AbstractCollection</code> å¹¶ä¸”åœ¨æ„é€ å‡½æ•°åˆå§‹åŒ–æ¨¡å‹å’Œèµ„æºæ¨¡å‹ã€‚</p>

<h2 id="ç¬¬äº”æ­¥-å·¥å‚å¯¹è±¡">ç¬¬äº”æ­¥ å·¥å‚å¯¹è±¡</h2>

<p>æˆ‘ä»¬å·²ç»å®ç°äº†åˆ›å»ºæ•°æ®è¡¨ã€æ¨¡å‹ã€èµ„æºæ¨¡å‹ã€å’Œé›†åˆã€‚é‚£å¦‚ä½•ä½¿ç”¨ä»–ä»¬å‘¢ï¼Ÿ</p>

<p>è¿™é‡Œè®¨è®ºä¸€ä¸‹æ¨¡å‹çš„å·¥å‚å¯¹è±¡ã€‚æˆ‘ä»¬çŸ¥é“é¢å‘å¯¹è±¡é‡Œï¼Œå·¥å‚æ–¹æ³•æ˜¯ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡çš„ï¼Œè€Œåœ¨Magentoï¼Œå·¥å‚å¯¹è±¡ä¹ŸåšåŒæ ·çš„äº‹ã€‚</p>

<p>å·¥å‚ç±»åç§°æ˜¯æ¨¡å‹ç±»ååé¢åŠ ä¸Š â€˜Factoryâ€™ å…³é”®å­—ã€‚æ‰€ä»¥æˆ‘ä»¬çš„å·¥å‚ç±»æ˜¯ <code class="language-plaintext highlighter-rouge">PostFactory</code>ã€‚ æˆ‘ä»¬ä¸éœ€è¦åˆ›å»ºè¿™ä¸ªç±»ï¼ŒMagentoç³»ç»Ÿå¯ä»¥è‡ªåŠ¨ç”Ÿæˆã€‚å½“Magentoçš„å¯¹è±¡ç®¡ç†å™¨ç¢°åˆ° â€˜Factoryâ€™ ç»“å°¾çš„ç±»åæ—¶ï¼Œå¦‚æœæ²¡æœ‰åˆ›å»ºåˆ™ä¼šè‡ªåŠ¨åœ¨ <code class="language-plaintext highlighter-rouge">var/generation</code> ç›®å½•ç”Ÿæˆã€‚å¯ä»¥æ‰¾åˆ°å·¥å‚ç±»åœ¨ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var/generation/&lt;vendor_name&gt;/&lt;module_name&gt;/Model/ClassFactory.php
</code></pre></div></div>

<p>æ­¤ä¾‹ä¸­ï¼Œç›®å½•æ˜¯ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var/generation/Aqrun/HelloWorld/Model/PostFactory.php
</code></pre></div></div>

<p>è¦å®ä¾‹åŒ–ä¸€ä¸ªæ¨¡å‹å¯¹è±¡æˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°æ„é€ å‡½æ•°çš„ä¾èµ–æ³¨å…¥è·å–å·¥å‚å¯¹è±¡ï¼Œç„¶åä½¿ç”¨å·¥å‚å¯¹è±¡æ¥å®ä¾‹åŒ–æ¨¡å‹å¯¹è±¡ã€‚å¦‚ä¸‹ä»£ç æˆ‘ä»¬åœ¨æ§åˆ¶å™¨è°ƒç”¨æ¨¡å‹è·å–æ•°æ®ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app/code/Aqrun/HelloWorld/Controller/Index/Index.php
</code></pre></div></div>

<p>ä»£ç ï¼š</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="kn">namespace</span> <span class="nn">Aqrun\HelloWorld\Controller\Index</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">Index</span> <span class="k">extends</span> <span class="err">\</span><span class="nc">Magento\Framework\App\Action\Action</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$_pageFactory</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$_postFactory</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span>
        <span class="err">\</span><span class="nc">Magento\Framework\App\Action\Context</span> <span class="nv">$context</span><span class="p">,</span>
        <span class="err">\</span><span class="nc">Magento\Framework\View\Result\PageFactory</span> <span class="nv">$pageFactory</span><span class="p">,</span>
        <span class="err">\</span><span class="nc">Aqrun\HelloWorld\Model\PostFactory</span> <span class="nv">$postFactory</span>
    <span class="p">){</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">_pageFactory</span> <span class="o">=</span> <span class="nv">$pageFactory</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">_postFactory</span> <span class="o">=</span> <span class="nv">$postFactory</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">parent</span><span class="o">::</span><span class="nf">__contruct</span><span class="p">(</span><span class="nv">$context</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">execute</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$post</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">_postFactory</span><span class="o">-&gt;</span><span class="nf">create</span><span class="p">();</span>
        <span class="nv">$collection</span> <span class="o">=</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="nf">getCollection</span><span class="p">();</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nv">$collection</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">){</span>
            <span class="k">echo</span> <span class="s1">'&lt;pre&gt;'</span><span class="p">;</span>
            <span class="nb">print_r</span><span class="p">(</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="nf">getData</span><span class="p">());</span>
            <span class="k">echo</span> <span class="s1">'&lt;/pre&gt;'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">exit</span><span class="p">();</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">_pageFactory</span><span class="o">-&gt;</span><span class="nf">create</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å¦‚ä¸Šæ§åˆ¶å™¨ï¼Œ PostFactory å¯¹è±¡ä¼šåœ¨æ„é€ å‡½æ•°åˆ›å»ºï¼Œåœ¨ <code class="language-plaintext highlighter-rouge">execute()</code> æ–¹æ³•æˆ‘ä»¬ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">$post = $this-&gt;_postFactory-&gt;create();</code> æ¥åˆ›å»ºæ¨¡å‹å¯¹è±¡ã€‚</p>

<p>æ¥ä¸‹æ¥å¯ä»¥ä½¿ç”¨æ•°æ®åº“ç®¡ç†è½¯ä»¶åˆ° aqrun_helloworld_post è¡¨æ·»åŠ 2æ¡å‡æ•°æ®ï¼Œæµ‹è¯•æ¨¡å‹æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>

<p>æ·»åŠ å®Œæ•°æ®è®¿é—®URL <code class="language-plaintext highlighter-rouge">http://mage.dev/helloworld/index/index</code> ç¡®è®¤æ·»åŠ çš„æ•°æ®åˆ—è¡¨å·²ç»æ˜¾ç¤ºã€‚</p>

<p>å¦‚æœæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼š Exception printing is disabled by default for security reasons ã€‚å¯ä»¥åˆ°  var/report ç›®å½•æ£€æŸ¥é”™è¯¯æ—¥å¿—ã€‚</p>

<p>æ¨¡å‹ç›¸å…³å°±å®Œç»“äº†ï¼Œä¸‹ä¸€ç« èŠ‚äº†è§£ä¸‹<a href="">è§†å›¾ï¼šå¸ƒå±€ã€åŒºå—ã€æ¨¡æ¿</a></p>
:ET