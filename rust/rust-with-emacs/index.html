<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <script src="https://aqrun.com/theme.min.js" integrity="sha384-IpIaa84kOKgkF5EJ0fD/kBe2wtIIsIB60ANGmuJxeA0dz5bSRfwBwp2/QybtQpU2"></script>
  <link rel="stylesheet" href="https://aqrun.com/abridge-switcher.css?h=2973f26bcd9308b43249" />
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <script defer src="https://aqrun.com/abridge-bundle.min.js?h=f0e7958f46d06221e99d" integrity="sha384-nUzn1rJBMPtXHTJcP76DAl7M3pn9hUVGWBMq6iYleX0NZ/ec+/xQ6nl8iXbBLfCs"></script>
  <meta name="base" content="https://aqrun.com" />
  <link rel="alternate" type="application/atom+xml" title="Atom/RSS Feed" href="https://aqrun.com/atom.xml" />
  <meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <title>Emacs ç¼–è¾‘å™¨é…ç½® Rust å¼€å‘ç¯å¢ƒ | å…‰é¹¿è·‘å†°</title>
  <meta name="author" content="å­å" />
  <meta name="copyright" content="å…‰é¹¿è·‘å†°" />
  <meta name="description" content="Emacs ç¼–è¾‘å™¨ Rust è¯­è¨€å¼€å‘ç¯å¢ƒé…ç½®ï¼Œ è¿‡å»çš„ä¸¤å¹´æ—¶é—´ Emacs å¯¹ Rust æ”¯æŒæœ‰äº†å¾ˆå¤§çš„æå‡ã€‚æœ¬æ–‡ä¸»è¦é…ç½® Emacs å¼€å‘ç¯å¢ƒï¼ŒåŠŸèƒ½å¦‚ä¸‹ï¼šæºä»£ç å¯¼èˆªï¼ˆè·³è½¬åˆ°å®" />
  <link rel="canonical" href="https://aqrun.com/rust/rust-with-emacs/" />
  <meta name="keywords" content="å­å,Aqrun, Zola, Theme, Zola Theme, getzola" />
  <meta property="og:url" content="https://aqrun.com/rust/rust-with-emacs/" />
  <meta name="twitter:url" content="https://aqrun.com/rust/rust-with-emacs/" />
  <meta property="og:description" content="Emacs ç¼–è¾‘å™¨ Rust è¯­è¨€å¼€å‘ç¯å¢ƒé…ç½®ï¼Œ è¿‡å»çš„ä¸¤å¹´æ—¶é—´ Emacs å¯¹ Rust æ”¯æŒæœ‰äº†å¾ˆå¤§çš„æå‡ã€‚æœ¬æ–‡ä¸»è¦é…ç½® Emacs å¼€å‘ç¯å¢ƒï¼ŒåŠŸèƒ½å¦‚ä¸‹ï¼šæºä»£ç å¯¼èˆªï¼ˆè·³è½¬åˆ°å®" />
  <meta name="twitter:description" content="Emacs ç¼–è¾‘å™¨ Rust è¯­è¨€å¼€å‘ç¯å¢ƒé…ç½®ï¼Œ è¿‡å»çš„ä¸¤å¹´æ—¶é—´ Emacs å¯¹ Rust æ”¯æŒæœ‰äº†å¾ˆå¤§çš„æå‡ã€‚æœ¬æ–‡ä¸»è¦é…ç½® Emacs å¼€å‘ç¯å¢ƒï¼ŒåŠŸèƒ½å¦‚ä¸‹ï¼šæºä»£ç å¯¼èˆªï¼ˆè·³è½¬åˆ°å®" />
  <meta property="og:title" content="Emacs ç¼–è¾‘å™¨é…ç½® Rust å¼€å‘ç¯å¢ƒ | å…‰é¹¿è·‘å†°" />
  <meta name="twitter:title" content="Emacs ç¼–è¾‘å™¨é…ç½® Rust å¼€å‘ç¯å¢ƒ | å…‰é¹¿è·‘å†°" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://aqrun.com/banner.png" />
  <meta property="og:image" content="https://aqrun.com/banner.png" />
  <meta property="og:site_name" content="å…‰é¹¿è·‘å†°" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="website" />
  <meta property="og:updated_time" content="2021-11-20" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="theme-color" content="#333333" />
  <meta name="msapplication-TileColor" content="#333333" />
  <link rel="manifest" href="https://aqrun.com/site.webmanifest" />
  <link rel="mask-icon" href="https://aqrun.com/safari-pinned-tab.svg" color="#ff9900" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://aqrun.com/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://aqrun.com/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://aqrun.com/favicon-16x16.png" />
  <noscript><link rel="stylesheet" href="https://aqrun.com/nojs.css" /></noscript>
</head>
<body>
  <header>
    <nav>
      <div><h1 class="oic-header-logfile">
            <a
               href="https://aqrun.com/"
               title="å­åä¸ªäººåšå®¢"
            ><img src="https://aqrun.com/icons/logo_default.svg" alt="å…‰é¹¿è·‘å†°" width="22" height="22" />å…‰é¹¿è·‘å†°</a>
          </h1></div>
      <div>
        <ul><li> <h2><a href="https://aqrun.com/">é¦–é¡µ</a></h2> </li><li> <h2><a href="https://aqrun.com/posts/">å…¨éƒ¨å†…å®¹</a></h2> </li><li> <h2><a href="https://aqrun.com/categories/">åˆ†ç±»</a></h2> </li><li> <h2><a href="https://aqrun.com/tags/">æ ‡ç­¾</a></h2> </li><li> <h2><a href="https://aqrun.com/diary/">æ¯æ—¥éšç¬”</a></h2> </li><li class="js"><i type="reset" id="mode" class="svgs adjust"></i></li></ul>
      </div>
      <div>
        <form autocomplete=off class="js" name="goSearch" id="searchbox">
          <div class="searchd">
            <input id="searchinput" type="text" placeholder="å†…å®¹æœç´¢" title="Search" />
            <button type="submit" title="Search"><i class="svgs search"></i></button>
          </div>
          <div><div id="suggestions"></div></div>
        </form>
      </div>
    </nav>
  </header>
  <main>
    <article class="oic-page">
        <h1><a href="https://aqrun.com/rust/rust-with-emacs/">Emacs ç¼–è¾‘å™¨é…ç½® Rust å¼€å‘ç¯å¢ƒ</a></h1>
        <span class="s95"> å­å<span class="hpad"> </span> 2021-11-20<span class="hpad"> </span>
          [<a href="https://aqrun.com/categories/rust/">
                Rust è¯­è¨€
            </a>]
           #<a href="https://aqrun.com/tags/rust/">rust</a>  #<a href="https://aqrun.com/tags/emacs/">emacs</a> </span>

    <blockquote>
<p>åŸæ–‡é“¾æ¥ï¼š<a rel="noopener" target="_blank" href="https://robert.kra.hn/posts/2021-02-07_rust-with-emacs/">https://robert.kra.hn/posts/2021-02-07_rust-with-emacs/</a>ã€‚ç¿»è¯‘æœ‰é”™æ¼æ¬¢è¿è¯„è®ºåŒºæŒ‡æ­£åæ§½ğŸ˜‚ã€‚</p>
</blockquote>
<p><img src="https://assets.oicnp.com/pic/demo.png" alt="demo" /></p>
<p>è¿‡å»çš„ä¸¤å¹´æ—¶é—´ Emacs å¯¹ Rust æ”¯æŒæœ‰äº†å¾ˆå¤§çš„æå‡ã€‚æœ¬æ–‡ä¸»è¦é…ç½® Emacs å¼€å‘ç¯å¢ƒï¼ŒåŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li>æºä»£ç å¯¼èˆªï¼ˆè·³è½¬åˆ°å®ç°ã€å¼•ç”¨åˆ—è¡¨ã€æ¨¡å—å¤§çº²ï¼‰</li>
<li>ä»£ç è¡¥å…¨</li>
<li>ä»£ç ç‰‡æ®µ</li>
<li>é”™è¯¯å’Œè­¦å‘Šè¡Œå†…é«˜äº®</li>
<li>ä»£ç ä¿®å¤å’Œé‡æ„</li>
<li>è‡ªåŠ¨å¯¼å…¥å®šä¹‰ï¼ˆå¦‚ç‰¹æ€§ï¼‰</li>
<li>rustfmt ä»£ç æ ¼å¼åŒ–</li>
<li>æ„å»ºå’Œè¿è¡Œå…¶å®ƒ cargo å‘½ä»¤</li>
</ul>
<p>æœ¬é…ç½®åŸºäº <a rel="noopener" target="_blank" href="https://rust-analyzer.github.io/">rust-analyzer</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤„äºæ´»è·ƒå¼€å‘çŠ¶æ€å¹¶ä½¿ VS Code æ”¯æŒ Rust çš„ LSP æœåŠ¡ã€‚</p>
<p>æœ¬æ–‡å¯ä»¥åšä¸ºå‚è€ƒæˆ–ç›´æ¥å» <a rel="noopener" target="_blank" href="https://github.com/rksm/emacs-rust-config">Github ä»“åº“</a> è·å–æºç ç›´æ¥è¿è¡Œï¼ˆå¦‚ä¸‹ï¼‰ã€‚å·²æµ‹è¯•å¯è¡Œçš„ç¯å¢ƒï¼šEmacs 27.1ã€rust stable 1.49.0ã€macOS 11.1ã€Ubuntu 18.4ã€Win10ã€‚</p>
<p>å¯¹äºæƒ³äº†è§£ Emacs-racer çš„ç›¸å…³é…ç½®å¯ä»¥æŸ¥çœ‹ <a rel="noopener" target="_blank" href="https://github.crookster.org/my-emacs-rust-language-config/">David Crook çš„æŒ‡å—</a>ã€‚</p>
<p>å†…å®¹ç›®å½•ï¼š</p>
<ul>
<li>å¿«é€Ÿå¼€å§‹</li>
<li>å‰ç½®éœ€æ±‚
<ul>
<li>Rust</li>
<li>rust-analyzer</li>
<li>Emacs</li>
</ul>
</li>
<li>Rust Eamcs è¯¦ç»†é…ç½®
<ul>
<li>rustic</li>
<li>lsp-mode å’Œ lsp-ui-mode</li>
<li>ä»£ç å¯¼èˆªè·³è½¬</li>
<li>ä»£ç æ“ä½œ</li>
<li>ä»£ç è¡¥å…¨å’Œç‰‡æ®µ</li>
<li>è¡Œå†…é”™è¯¯</li>
<li>è¡Œå†…ç±»å‹æç¤º</li>
<li>é™„åŠ åŒ…</li>
</ul>
</li>
<li>Debug è°ƒè¯•</li>
<li>æ„Ÿè°¢</li>
</ul>
<h2 id="kuai-su-kai-shi">å¿«é€Ÿå¼€å§‹</h2>
<p>å¦‚æœä½ å·²ç»å®‰è£…äº† Rust å’Œ Emacs é‚£å¯ä»¥ç›´æ¥å¿«é€Ÿå¼€å§‹è€Œä¸ç”¨å¯¹ç°æœ‰é…ç½®åšä»»ä½•ä¿®æ”¹ã€‚å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åœ¨å¯åŠ¨ Emacs æ—¶åŠ è½½<a rel="noopener" target="_blank" href="https://github.com/rksm/emacs-rust-config">rksm/emacs-rust-config github ä»“åº“</a> çš„ <code>standalone.el</code> é…ç½®æ–‡ä»¶ï¼š</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">git</span></span><span class="z-meta z-function-call z-arguments z-shell"> clone https://github.com/rksm/emacs-rust-config</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">emacs</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>q</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>load</span> ./emacs-rust-config/standalone.el</span>
</span></code></pre>
<p>æ­¤å‘½ä»¤ä¼šåœ¨å¯åŠ¨ Emacs æ—¶ä½¿ç”¨æ£€å‡ºä»“åº“çš„ç›®å½•çš„ <code>.emacs.d</code> è·¯å¾„ï¼ˆä»¥åŠä¸åŒçš„ elpa æ–‡ä»¶å¤¹ï¼‰ã€‚æ„å‘³ç€ä¸ä¼šä½¿ç”¨å’Œä¿®æ”¹ä½ åŸæœ‰çš„ <code>$HOME/.emacs.d</code>ã€‚å¦‚æœä½ ä¸ç¡®å®šæˆ–æ˜¯å¾ˆæ¸…æ¥šè¿™é‡Œæè¿°çš„å†…å®¹ï¼Œè¿™ç§æ–¹å¼éƒ½æ˜¯æœ€ç®€å•çš„é…ç½®ã€‚</p>
<p>æ‰€æœ‰çš„ä¾èµ–éƒ½ä¼šåœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶è¢«å®‰è£…ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨ä¼šå¤šèŠ±äº›æ—¶é—´ã€‚</p>
<p>Windows ç³»ç»Ÿå¯ä»¥åœ¨å¿«æ·æ–¹å¼ä¸­æ·»åŠ è¿™äº›å‚æ•°å¯åŠ¨ Emacsã€‚å¦‚æœæ˜¯ macOS å¹¶ä¸”å®‰è£…çš„æ˜¯ Emacs.app åˆ™éœ€è¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¡Œï¼š</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">/Applications//Emacs.app/Contents/MacOS/Emacs</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>q</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>load</span> ./emacs-rust-config/standalone.el</span>
</span></code></pre>
<h2 id="xian-jue-tiao-jian">å…ˆå†³æ¡ä»¶</h2>
<p>å¼€å§‹é…ç½® Emacs å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç³»ç»Ÿå·²ç»å®‰è£…äº†ä¸‹é¢è¿™äº›è½¯ä»¶ï¼š</p>
<h3 id="rust">Rust</h3>
<p>å®‰è£… Rust å·¥å…·é“¾åŠ cargoï¼Œè¿™äº›ä½¿ç”¨ <a rel="noopener" target="_blank" href="https://rustup.rs/">rustup</a> å¾ˆå®¹æ˜“å®‰è£…ã€‚å®‰è£…ç¨³å®šç‰ˆçš„ rust å¹¶ç¡®ä¿ <code>.cargo/bin</code> å·²ç»æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œrustup å¯ä»¥é»˜è®¤å®Œæˆè¿™äº›æ“ä½œã€‚rust-analyzer ä¾èµ– Rust æºç ï¼Œå¯ä»¥è¿è¡Œå‘½ä»¤ <code>rustup component add rust-src</code> è¿›è¡Œå®‰è£…ã€‚</p>
<h3 id="rust-analyzer">rust-analyzer</h3>
<p>éœ€è¦ rust-analyzer æœåŠ¡çš„äºŒè¿›åˆ¶åŒ…ã€‚å¯ä»¥å‚è€ƒ <a rel="noopener" target="_blank" href="https://rust-analyzer.github.io/manual.html#rust-analyzer-language-server-binary">rust-analyzer æ‰‹å†Œ</a>è¿›è¡Œå®‰è£…ï¼Œæœ‰é¢„ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶åŒ…ã€‚ç„¶è€Œï¼Œç”±äº rust-analyzer å¼€å‘éå¸¸æ´»è·ƒï¼Œæˆ‘é€šå¸¸æ˜¯ä¸‹è½½ github ä»“åº“æºç å†è‡ªè¡Œç¼–è¯‘ã€‚è¿™ç§æ–¹å¼æ›´ä¾¿äºå‡çº§ç‰ˆæœ¬ï¼ˆå¯èƒ½ä¹Ÿéœ€è¦é™çº§ï¼‰ã€‚</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> git clone https://github.com/rust-analyzer/rust-analyzer.git</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> cd rust-analyzer</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> cargo xtask install<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>server <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> ä¼šå®‰è£… rust-analyzer åˆ° $HOME/.cargo/bin ç›®å½•</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span></code></pre>
<p>ç»å¸¸ä¼šå‘ç”Ÿæ–°ç‰ˆä¸èƒ½æ­£å¸¸è¿è¡Œçš„é—®é¢˜ã€‚è¿™ç§æƒ…å†µæˆ‘å»ºè®®æŸ¥çœ‹ <a rel="noopener" target="_blank" href="https://rust-analyzer.github.io/thisweek">rust-analyzer æ”¹åŠ¨æ—¥å¿—</a>ï¼Œæ—¥å¿—åŒ…å«é“¾æ¥åˆ°æ¯å‘¨æ›´æ–°çš„ git æäº¤ã€‚å¦‚æœä¸èƒ½æ­£å¸¸è¿è¡Œï¼Œå¯ä»¥è¯•ç€æ„å»ºæ—©ä¸€äº›çš„ç‰ˆæœ¬ï¼Œæˆ–è®¸å¯ä»¥æˆåŠŸã€‚å†™æœ¬æ–‡æ—¶ï¼ˆ2021.11.15ï¼‰æˆ‘ç”¨çš„æ˜¯<a rel="noopener" target="_blank" href="https://github.com/rust-analyzer/rust-analyzer/commit/73668334f05c3446b04116ccc3156240d2d8ab19">7366833</a>ï¼Œè¿™ä¸ªç‰ˆæœ¬åœ¨ ç¨³å®šç‰ˆRust 1.56.1 ä»¥åŠ Ubuntuã€MacOSå’ŒWindowsç³»ç»Ÿéƒ½å·¥ä½œæ­£å¸¸ã€‚</p>
<h3 id="emacs">Emacs</h3>
<p>æˆ‘æµ‹è¯•è¿‡å¯ä»¥é…ç½®çš„ç‰ˆæœ¬æ˜¯ Emacs 27.1ã€‚Macä¸Šæˆ‘é€šå¸¸ä½¿ç”¨ <a rel="noopener" target="_blank" href="https://emacsformacosx.com/">emacsformacosx</a>ã€‚Windows ä¸Šæˆ‘ä½¿ç”¨ â€œé™„è¿‘çš„ GNU é•œåƒâ€é“¾æ¥ä¸º <a rel="noopener" target="_blank" href="https://www.gnu.org/software/emacs/download.html">gnu.org/software/emacs</a>ã€‚åœ¨Ubuntuéœ€è¦<a rel="noopener" target="_blank" href="https://ubuntuhandbook.org/index.php/2020/09/install-emacs-27-1-ppa-ubuntu-20-04/">æ·»åŠ ç¬¬ä¸‰æ–¹ apt ä»“åº“</a>ã€‚æ³¨æ„æ­¤é…ç½®åœ¨è¾ƒè€çš„emacs ç‰ˆæœ¬ä¹Ÿå¯ä»¥å·¥ä½œï¼Œä½† Emacs 27 åœ¨ JSON è§£ææ–¹é¢æœ‰å®è´¨æ€§çš„æ”¹è¿›å¤§å¤§æé«˜äº† LSP å®¢æˆ·ç«¯çš„é€Ÿåº¦ã€‚</p>
<p>æ³¨æ„ï¼Œæˆ‘ä½¿ç”¨ <a rel="noopener" target="_blank" href="https://github.com/jwiegley/use-package">use-package</a> ä½œä¸º Emacs çš„åŒ…ç®¡ç†å™¨ã€‚å®ƒå°†è‡ªåŠ¨å®‰è£…è¿™ä¸ªé…ç½®çš„ç‹¬ç«‹ç‰ˆæœ¬ã€‚å¦åˆ™å¯ä»¥åœ¨ä½ çš„ <code>init.el</code> æ·»åŠ å¦‚ä¸‹ç‰‡æ®µï¼š</p>
<pre data-lang="lisp" class="language-lisp z-code"><code class="language-lisp" data-lang="lisp"><span class="z-source z-lisp"><span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-control z-lisp">unless</span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>package<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>installed<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>p &#39;<span class="z-support z-function z-lisp">use-package</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
	<span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>package<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>refresh<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>contents<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
	<span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>package<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>install &#39;<span class="z-support z-function z-lisp">use-package</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
</span></code></pre>
<h2 id="rust-emacs-xiang-xi-pei-zhi">Rust Emacs è¯¦ç»†é…ç½®</h2>
<p>ç”¨åˆ°çš„æ¨¡å¼æœ‰ï¼š</p>
<ul>
<li>rustic</li>
<li>lsp-mode</li>
<li>company</li>
<li>yasnippet</li>
<li>flycheck</li>
</ul>
<h3 id="rustic">Rustic</h3>
<p><a rel="noopener" target="_blank" href="https://github.com/brotzeit/rustic">rustic</a> æ˜¯ <code>rust-mode</code> çš„ä¸€ä¸ªåˆ†æ”¯å¹¶æ‰©å±•äº†å¾ˆå¤šæœ‰ç”¨çš„åŠŸèƒ½ï¼ˆå¯ä»¥æŸ¥çœ‹å®ƒçš„ github readmeï¼‰ã€‚å®ƒæ˜¯é…ç½®çš„æ ¸å¿ƒï¼Œå¦‚æœä½ åªéœ€è¦ä»£ç é«˜äº®å’Œ emacs ç»‘å®šçš„ cargo å¿«æ·é”®ï¼Œé‚£å°±è¿™ä¸€ä¸ªå°±å¤Ÿäº†ä¸éœ€è¦å…¶å®ƒä»»ä½• Emacs æ‰©å±•åŒ…ã€‚</p>
<pre data-lang="lisp" class="language-lisp z-code"><code class="language-lisp" data-lang="lisp"><span class="z-source z-lisp"><span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">use-package</span> rustic
  :ensure
  :bind <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>:<span class="z-support z-function z-lisp">map</span> rustic<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-keyword z-operator z-arithmetic z-lisp">mod</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">map</span>
      <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>M-j<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span> . lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>ui<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>imenu<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
      <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>M-?<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span> . lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">find</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>references<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
      <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>C-c C-c l<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span> . flycheck<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">list</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>errors<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
      <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>C-c C-c a<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span> . lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>execute<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>code<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>action<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
      <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>C-c C-c r<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span> . lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>rename<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
      <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>C-c C-c q<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span> . lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>wordspace<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>restart<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
      <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>C-c C-c Q<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span> . lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>workspace<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>shutdown<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
      <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>C-c C-c s<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span> . lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>rust<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>analyzer<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>status<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  :confi
  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; å‡å°‘é—ªåŠ¨å¯ä»¥å–æ¶ˆè¿™é‡Œçš„æ³¨é‡Š
</span>  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; (setq lsp-eldoc-hook nil)      
</span>  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; (setq lsp-enable-symbol-highlighting nil)
</span>  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; (setq lsp-signature-auto-activate nil)
</span>
  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; æ³¨é‡Šä¸‹é¢è¿™è¡Œå¯ä»¥ç¦ç”¨ä¿å­˜æ—¶ rustfmt æ ¼å¼åŒ–
</span>  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">setq</span> rustic<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">format</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>on<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>save <span class="z-constant z-language z-lisp">t</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>add<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hook &#39;rustic<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hook &#39;rk<span class="z-keyword z-operator z-arithmetic z-lisp">/</span>rustic<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hook<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>

<span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-meta z-function z-lisp"><span class="z-storage z-type z-function-type z-lisp">defun</span> <span class="z-entity z-name z-function z-lisp">rk</span></span><span class="z-keyword z-operator z-arithmetic z-lisp">/</span>rustic<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hook <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; æ‰€ä»¥è¿è¡Œ C-c C-c C-r æ— éœ€ç¡®è®¤å°±å¯ä»¥å·¥ä½œï¼Œä½†ä¸è¦å°è¯•ä¿å­˜ä¸æ˜¯æ–‡ä»¶è®¿é—®çš„ rust ç¼“å­˜ã€‚
</span>  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; ä¸€æ—¦ https://github.com/brotzeit/rustic/issues/253 é—®é¢˜å¤„ç†äº†
</span>  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; å°±ä¸éœ€è¦è¿™ä¸ªé…ç½®äº†
</span>  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-control z-lisp">when</span> buffer<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>file<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>name
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">setq</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>local buffer<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>save<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>without<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>query <span class="z-constant z-language z-lisp">t</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
</span></code></pre>
<p>rustic çš„å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½ç»‘å®šåˆ° <code>C-c C-c</code> å‰ç¼€ï¼ˆä¹Ÿå°±æ˜¯æŒ‰ Control-c é”®ä¸¤æ¬¡å†æŒ‰å…¶å®ƒé”®ï¼‰ï¼š</p>
<p><img src="http://assets.oicnp.com/pic/rustic-shortcuts-1.png" alt="shortcut" /></p>
<p>ä½ å¯ä»¥ä½¿ç”¨ <code>C-c C-c C-r</code> è°ƒç”¨ <code>cargo run</code> è¿è¡Œç¨‹åºã€‚æœ‰å¯èƒ½éœ€è¦ä½ æŒ‡å®šä¸€äº›å‚æ•°ä¾‹å¦‚ä½¿ç”¨å‘å¸ƒæ¨¡å¼è¿è¡Œå¯ä»¥æŒ‡å®š <code>--release</code> æˆ–è¦è¿è¡Œåç§°ä¸º &quot;other-bin&quot; çš„ç›®æ ‡ç¨‹åºä½¿ç”¨å‚æ•° <code>--bin other-bin</code>ï¼ˆæ›¿æ¢ mina.rsï¼‰ã€‚ è¦ç»™å¯æ‰§è¡Œç¨‹åºæœ¬èº«ä¼ é€’å‚æ•°ä½¿ç”¨ <code>-- --arg1 --arg2</code>ã€‚</p>
<p>å¿«æ·é”® <code>C-c C-c C-c</code> ä¼šè¿è¡Œæµ‹è¯•ã€‚éå¸¸æ–¹ä¾¿æ‰§è¡Œå†…è”æµ‹è¯•è€Œä¸ç”¨ç»å¸¸çš„æ¥åˆ‡å›åœ¨ç»ˆç«¯å’Œ Emacs ä¹‹é—´åˆ‡æ¢ã€‚</p>
<p><code>C-c C-p</code> å‘½ä»¤ä¼šæ‰“å¼€ä¸€ä¸ªå›ºå®šä½ç½®çš„å¼¹å‡ºç¼“å†²åŒºæ˜¾ç¤ºä¸Šé¢çš„å¿«æ·å‘½ä»¤ã€‚</p>
<p>Rustic æä¾›äº†ä¸€äº›å’Œ cargo å¾ˆæ–¹ä¾¿çš„é›†æˆï¼Œä¾‹å¦‚ï¼Œ<code>M-x rustic-cargo-add</code> ä¼šå…è®¸ä½ æ·»åŠ ä¾èµ–åˆ°é¡¹ç›®çš„ <code>Cargo.toml</code> ï¼ˆé€šè¿‡ <a rel="noopener" target="_blank" href="https://crates.io/crates/cargo-edit">cargo-edit</a> è¿™ä¸ªéœ€è¦æå‰å®‰è£…å¥½ï¼‰ã€‚</p>
<p>å¦‚æœä½ æƒ³åˆ†äº«ä»£ç ç‰‡æ®µï¼Œ<code>M-x rstic-playpen</code> å‘½ä»¤ä¼šæŠŠä½ å½“å‰ç¼“å†²åŒºåœ¨ <a rel="noopener" target="_blank" href="https://play.rust-lang.org">https://play.rust-lang.org</a> æ‰“å¼€ï¼Œå¯ä»¥è®©ä½ åœ¨çº¿è¿è¡Œ Rust ä»£ç å¹¶ä¸”æœ‰ä¸€ä¸ªå¯ä»¥åˆ†äº«çš„é“¾æ¥ã€‚</p>
<p>é»˜è®¤å¯ç”¨äº†ä¿å­˜æ—¶ä½¿ç”¨ rustfmt è¿›è¡Œä»£ç æ ¼å¼åŒ–ã€‚è¦ç¦ç”¨å®ƒå¯ä»¥è®¾ç½® <code>(setq rustic-format-on-save nil)</code>ã€‚ä¹Ÿå¯ä»¥åœ¨éœ€è¦æ—¶ä½¿ç”¨ <code>C-c C-c C-o</code> æ ¼å¼åŒ–ç¼“å†²åŒºã€‚</p>
<h3 id="lsp-mode-and-lsp-ui-mode">lsp-mode and lsp-ui-mode</h3>
<p>lsp-mode æä¾›äº† <a rel="noopener" target="_blank" href="https://emacs-lsp.github.io/lsp-mode/page/lsp-rust/">rust-analyzer</a> çš„é›†æˆã€‚å¯ç”¨äº†ä¸€äº› IDE çš„åŠŸèƒ½å¦‚æºä»£ç å¯¼èˆªã€é€šè¿‡ flycheck ï¼ˆå¦‚ä¸‹ï¼‰è¯­æ³•æ£€æŸ¥é”™è¯¯é«˜äº®ä»¥åŠä¸º company æä¾›ä»£ç è‡ªåŠ¨è¡¥å…¨ï¼ˆå¦‚ä¸‹ï¼‰ã€‚</p>
<pre data-lang="lisp" class="language-lisp z-code"><code class="language-lisp" data-lang="lisp"><span class="z-source z-lisp"><span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">use-package</span> lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode
  :ensure
  :commands lsp
  :custom
  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; ä¿å­˜æ—¶ä½¿ç”¨ä»€ä¹ˆè¿›è¡Œæ£€æŸ¥ï¼Œé»˜è®¤æ˜¯ &quot;check&quot;ï¼Œæˆ‘æ›´æ¨è &quot;clippy&quot;
</span>  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>rust<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>analyzer<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>cargo<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>watch<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>command <span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>clippy<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>eldoc<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>render<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>all <span class="z-constant z-language z-lisp">t</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>idle<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>delay <span class="z-constant z-numeric z-lisp">0.6</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>rust<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>analyzer<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>server<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>display<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>inlay<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hints <span class="z-constant z-language z-lisp">t</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  :config
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>add<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hook &#39;lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hook &#39;lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>ui<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>

<span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">use-package</span> lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>ui
  :ensuer
  :commands lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>ui<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode
  :custom
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>ui<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>peek<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-keyword z-control z-lisp">always</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>show <span class="z-constant z-language z-lisp">t</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>ui<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>sideline<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>show<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hover <span class="z-constant z-language z-lisp">t</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>lsp<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>ui<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>doc<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>enable <span class="z-constant z-language z-lisp">nil</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
</span></code></pre>
<p>lsp-ui æ˜¯å¯é€‰çš„ï¼Œå®ƒæä¾›åœ¨å…‰æ ‡å¤„æ ‡è®°å¹¶æ˜¾ç¤ºå†…è”å¼¹å±‚ä»¥åŠå…‰æ ‡å¤„çš„ä»£ç ä¿®å¤ã€‚å¦‚æœä½ å‘ç°å®ƒé—ªåŠ¨ä¸æƒ³å¼€å¯è¿™ä¸ªåŠŸèƒ½ï¼Œåªéœ€è¦ç§»é™¤ <code>:config (add-hook 'lsp-mode-hook 'lsp-ui-mode)</code>ã€‚</p>
<p>ä¸Šé¢çš„é…ç½®ä¹Ÿå…³é—­äº† lsp-ui å†…è”æ˜¾ç¤ºçš„æ–‡æ¡£åŠŸèƒ½ã€‚è¿™ä¸ªæ¯”è¾ƒç¬¦åˆæˆ‘çš„ä¹ æƒ¯ï¼Œç”±äºå®ƒç»å¸¸é®ä½æºä»£ç ã€‚å¦‚æœä½ ä¹Ÿæƒ³å…³é—­åœ¨ mini ç¼“å†²åŒºæ˜¾ç¤ºçš„æ–‡æ¡£å¯ä»¥æ·»åŠ  <code>(setq lsp-eldoc-hook nil)</code>ã€‚åœ¨å…‰æ ‡ç§»åŠ¨æ—¶æƒ³æ“ä½œçš„æ›´å°‘å¯ä»¥è€ƒè™‘ <code>(setq lsp-signature-auto-activate nil)</code> å’Œ <code>(setq lsp-enable-symbol-highlighting nil)</code>ã€‚</p>
<h3 id="code-navigation">Code Navigation</h3>
<p>é…ç½®å¥½ lsp-mode å½“ä½ çš„å…‰æ ‡åœ¨ä¸€ä¸ªæ ‡è®°ä¸Šé¢æ—¶ä½ å°±å¯ä»¥ä½¿ç”¨ <code>M-.</code> æ¥è·³è½¬åˆ°å‡½æ•°ã€ç»“æ„ä½“ã€åŒ…ç­‰çš„å®šä¹‰å¤„ã€‚<code>M-,</code> å¯ä»¥å†è·³å›æ¥ã€‚ä½¿ç”¨ <code>M-?</code> ä½ å¯ä»¥åˆ—å‡ºæ ‡è®°çš„æ‰€æœ‰å¼•ç”¨ã€‚å¦‚ä¸‹æ¼”ç¤ºï¼š</p>
<p><img src="https://assets.oicnp.com/pic/rust-lsp-demo-1.gif" alt="rust-lsp-demo" /></p>
<p>ä½¿ç”¨ <code>M-j</code> ä½ å¯ä»¥æ‰“å¼€å…è®¸ä½ åœ¨å‡½æ•°å’Œå…¶å®ƒå®šä¹‰ä¹‹é—´å¿«é€Ÿè·³è½¬çš„å½“å‰æ¨¡å—å¤§çº²ã€‚</p>
<p><img src="https://assets.oicnp.com/pic/imenu.png" alt="imenu" /></p>
<h3 id="dai-ma-cao-zuo-code-actions">ä»£ç æ“ä½œï¼ˆCode Actionsï¼‰</h3>
<p>å¯ä»¥ä½¿ç”¨ <code>M-x lsp-rename</code> å’Œ <code>lsp-execute-code-action</code> è¿›è¡Œé‡æ„ã€‚ä»£ç æ“ä½œåŸºæœ¬ä¸Šå°±æ˜¯ä»£ç è½¬æ¢å’Œä¿®å¤ã€‚ä¾‹å¦‚ä»£ç æ£€æŸ¥å¯èƒ½ä¼šå‘ç°æ›´ä¼˜é›…çš„ä»£ç è¡¨è¾¾æ–¹å¼ï¼š</p>
<p><img src="http://assets.oicnp.com/pic/rust-lsp-demo-2.gif" alt="rust-lsp-demo-2" /></p>
<p>å¯ç”¨çš„ä»£ç æ“ä½œçš„æ•°é‡è¿˜åœ¨æŒç»­å¢é•¿ã€‚å®Œæ•´çš„åˆ—è¡¨å¯ä»¥æŸ¥çœ‹ <a rel="noopener" target="_blank" href="https://rust-analyzer.github.io/manual.html#assists-code-actions">rust-analyzer æ–‡æ¡£</a>ã€‚æ”¶è—çš„åŒ…æ‹¬è‡ªåŠ¨å‡½æ•°å¼•å…¥æˆ–å®Œå…¨çš„ä»£ç åˆæ ¼åŒ–ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªæ¨¡å—è¿˜æ²¡æœ‰å¼•å…¥ HashMapï¼Œè¾“å…¥ <code>HashMap</code> ç„¶åé€‰æ‹©é€‰é¡¹å¯ä»¥å¼•å…¥ <code>Import std::collections::HashMap</code>ã€‚å…¶ä»–ä»£ç æ“ä½œå…è®¸ä½ åœ¨åŒ¹é…è¡¨è¾¾å¼ä¸­æ·»åŠ æ‰€æœ‰å¯èƒ½çš„åˆ†æ”¯ï¼Œæˆ–è€…ä¸ºå®šä¹‰å®ç°è½¬æ¢ <code>#[derive(Trait)]</code> ä¸ºå¿…è¦çš„çš„ä»£ç ã€‚è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šã€‚</p>
<p>å¦‚æœä½ åœ¨å¼€å‘å®ï¼Œå¿«é€ŸæŸ¥çœ‹ä»–ä»¬æ˜¯å¦‚ä½•æ‰©å±•çš„å°†éå¸¸å®ç”¨ã€‚ä½¿ç”¨ <code>M-x lsp-rust-analyzer-expand-macro</code> æˆ–å¿«æ·é”® <code>C-c C-c e</code> æ¥å±•å¼€å®ã€‚</p>
<h3 id="dai-ma-bu-quan-he-pian-duan-code-completion-and-snippets">ä»£ç è¡¥å…¨å’Œç‰‡æ®µï¼ˆCode completion and snippetsï¼‰</h3>
<p>lsp-mode ç›´æ¥å’Œ Emacs çš„è¡¥å…¨æ¡†æ¶ <a rel="noopener" target="_blank" href="https://company-mode.github.io/">company-mode</a> é›†æˆã€‚å®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªèƒ½è¢«æ’å…¥åˆ°å…‰æ ‡å¤„çš„å¯é€‰ç¬¦å·åˆ—è¡¨ã€‚åœ¨ä½¿ç”¨ä¸ç†Ÿæ‚‰çš„åº“ï¼ˆæˆ– std åº“ï¼‰æ—¶éå¸¸æœ‰ç”¨ï¼Œä¸å†éœ€è¦ç»å¸¸æŸ¥çœ‹æ–‡æ¡£ã€‚Rust çš„ç±»å‹ç³»ç»Ÿè¢«ç”¨ä½œè¡¥å…¨çš„æ¥æºï¼Œå› æ­¤ä½ å¯ä»¥æ’å…¥æœ‰æ„ä¹‰çš„å†…å®¹ã€‚</p>
<p>é»˜è®¤ä»£ç è¡¥å…¨å¼¹æ¡†ä¼šåœ¨ <code>company-idle-delay</code> è®¾ç½®çš„ 0.5 ç§’åæ˜¾ç¤ºã€‚ä½ å¯ä»¥ä¿®æ”¹è¿™ä¸ªå€¼æˆ–è€…è®¾ç½® <code>company-begin-commands</code> ä¸º <code>nil</code> æ¥å®Œå…¨å…³é—­å¼¹å±‚ã€‚</p>
<pre data-lang="lisp" class="language-lisp z-code"><code class="language-lisp" data-lang="lisp"><span class="z-source z-lisp"><span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">use-package</span> company
  :ensure
  :custom
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>company<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>idle<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>delay <span class="z-constant z-numeric z-lisp">0.5</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span> <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; å¼¹å±‚å»¶è¿Ÿæ˜¾ç¤ºæ—¶é•¿
</span>  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; (company-begin-commands nil) ;; å–æ¶ˆæ³¨é‡Šå¯ä»¥ç¦ç”¨å¼¹å±‚
</span>  :bind
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>:<span class="z-support z-function z-lisp">map</span> compnay<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>active<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">map</span>
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>C-n<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span>. company<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>select<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>next<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>C-p<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span>. company<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>select<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">previous</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>M-&lt;<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span>. company<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>select<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">first</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>M-&gt;<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span>. company<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>select<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">last</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>

<span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">use-package</span> yasnippet
  :ensure
  :config
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>yas<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>reload<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>all<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>add<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hook &#39;<span class="z-keyword z-control z-lisp">prog</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hook &#39;yas<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>minor<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>add<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hook &#39;text<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>hook &#39;yas<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>minor<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
</span></code></pre>
<p>è¿™é‡Œä¹Ÿä¼šé€šè¿‡ <a rel="noopener" target="_blank" href="https://joaotavora.github.io/yasnippet/">yasnippet</a> å¯ç”¨ä»£ç ç‰‡æ®µã€‚æˆ‘æœ‰ä¸€ä¸ª<a rel="noopener" target="_blank" href="https://github.com/rksm/emacs-rust-config/tree/master/snippets/rustic-mode">å¸¸ç”¨ç‰‡æ®µ github ä»“åº“</a> åˆ—è¡¨ã€‚å¯ä»¥éšæ„æ‹·è´å¹¶ä¿®æ”¹ä»–ä»¬ã€‚ä»–ä»¬çš„å·¥ä½œæ–¹å¼æ˜¯é€šè¿‡è¾“å…¥å›ºå®šçš„å­—ç¬¦åºåˆ—ç„¶åæŒ‰ TAB é”®ã€‚ä¾‹å¦‚ <code>for&lt;TAB&gt;</code> ä¼šå±•å¼€ä¸º for å¾ªç¯ã€‚ä½ å¯ä»¥è‡ªå®šä¹‰é¢„å¡«çš„å†…å®¹å’Œå±•å¼€çš„åœæ­¢æ•°é‡ç”šè‡³æ‰§è¡Œè‡ªå®šä¹‰çš„ elisp ä»£ç ã€‚å…·ä½“æŸ¥çœ‹ yasnippet æ–‡æ¡£ã€‚</p>
<p>è¦åœ¨ç‚¹å‡» TAB é”®æ—¶å¯ç”¨ä»£ç ç‰‡æ®µå±•å¼€ã€ä»£ç è¡¥å…¨å’Œç¼©è¿›ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰åœ¨ç‚¹å‡» TAB æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼š</p>
<pre data-lang="lisp" class="language-lisp z-code"><code class="language-lisp" data-lang="lisp"><span class="z-source z-lisp"><span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">use-package</span> company
  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; ... æ¥ä¸Šé¢ ...
</span>  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>:<span class="z-support z-function z-lisp">map</span> company<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-keyword z-operator z-arithmetic z-lisp">mod</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">map</span>
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>&lt;tab&gt;<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span>. tab<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>indent<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-keyword z-operator z-logical z-lisp">or</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>complete<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>TAB<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span>. tab<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>indent<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-keyword z-operator z-logical z-lisp">or</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>complete<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>

<span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-meta z-function z-lisp"><span class="z-storage z-type z-function-type z-lisp">defun</span> <span class="z-entity z-name z-function z-lisp">company-yasnippet-or-complete</span></span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>interactive<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-operator z-logical z-lisp">or</span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-control z-lisp">do</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>yas<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">expand</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>company<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>complete<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>common<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>

<span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-meta z-function z-lisp"><span class="z-storage z-type z-function-type z-lisp">defun</span> <span class="z-entity z-name z-function z-lisp">check-expansion</span></span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>save<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>excursion
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-control z-lisp">if</span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>looking<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>at <span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span><span class="z-constant z-character z-escape z-lisp">\\</span>_&gt;<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span> <span class="z-constant z-language z-lisp">t</span>
      <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>backward<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">char</span> <span class="z-constant z-numeric z-lisp">1</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
      <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-control z-lisp">if</span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>looking<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>at <span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span><span class="z-constant z-character z-escape z-lisp">\\</span>.<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span> <span class="z-constant z-language z-lisp">t</span>
        <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>backward<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">char</span> <span class="z-constant z-numeric z-lisp">1</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
        <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-control z-lisp">if</span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>looking<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>at <span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>::<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span> <span class="z-constant z-language z-lisp">t</span> <span class="z-constant z-language z-lisp">nil</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
      <span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
    <span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>

<span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-meta z-function z-lisp"><span class="z-storage z-type z-function-type z-lisp">defun</span> <span class="z-entity z-name z-function z-lisp">do-yas-expand</span></span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-control z-lisp">let</span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>yas<span class="z-keyword z-operator z-arithmetic z-lisp">/</span>fallback<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>behavior &#39;<span class="z-keyword z-control z-lisp">return</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-constant z-language z-lisp">nil</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>yas<span class="z-keyword z-operator z-arithmetic z-lisp">/</span><span class="z-support z-function z-lisp">expand</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>

<span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-meta z-function z-lisp"><span class="z-storage z-type z-function-type z-lisp">defun</span> <span class="z-entity z-name z-function z-lisp">tab-indent-or-complete</span></span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>interactive<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-control z-lisp">if</span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>minibufferp<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>minibuffer<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>complete<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-control z-lisp">if</span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-operator z-logical z-lisp">or</span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-operator z-logical z-lisp">not</span> yas<span class="z-keyword z-operator z-arithmetic z-lisp">/</span>minor<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-keyword z-operator z-arithmetic z-lisp">mod</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
          <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-constant z-language z-lisp">null</span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-control z-lisp">do</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>yas<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-support z-function z-lisp">expand</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
        <span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
        <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-keyword z-control z-lisp">if</span> <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>check<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>expansion<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
          <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>company<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>complete<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>common<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
          <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>indent<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-keyword z-control z-lisp">for</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>tab<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>command<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
        <span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
    <span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
</span></code></pre>
<p>å¤§éƒ¨åˆ†å¸¸ç”¨ç‰‡æ®µæ˜¯ <code>for</code>ã€<code>log</code>ã€<code>ifl</code>ã€<code>match</code> å’Œ <code>fn</code> ã€‚</p>
<h3 id="xing-nei-cuo-wu">è¡Œå†…é”™è¯¯</h3>
<p>è¿™ä¸ªå¾ˆç®€å•ï¼Œrustic åšäº†å¾ˆå¤šç¹é‡çš„ä»»åŠ¡ã€‚æˆ‘ä½åªéœ€è¦ç¡®è®¤ä»£ç æ£€æŸ¥å·²ç»åŠ è½½ï¼š</p>
<pre data-lang="lisp" class="language-lisp z-code"><code class="language-lisp" data-lang="lisp"><span class="z-source z-lisp"><span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">use-package</span> flycheck :ensure<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
</span></code></pre>
<p>ä¹Ÿå¯ä»¥æ‰§è¡Œ <code>M-x flycheck-list-errors</code> æˆ–ç‚¹å‡»å¿«æ·é”® <code>C-c C-c l</code> æ¥æ˜¾ç¤ºä¸€ä¸ªé”™è¯¯å’Œè­¦å‘Šçš„åˆ—è¡¨ã€‚</p>
<h3 id="xing-nei-lei-xing-ti-shi">è¡Œå†…ç±»å‹æç¤º</h3>
<p>Rust-analyzer å’Œ lsp-mode <a rel="noopener" target="_blank" href="https://emacs-lsp.github.io/lsp-mode/page/lsp-rust/#inlay-hints">å¯ä»¥æ˜¾ç¤ºè¡Œå†…ç±»å‹æ³¨é‡Š</a>ã€‚é€šå¸¸å½“æŠŠå…‰æ ‡æ”¾åœ¨å®šä¹‰çš„å˜é‡ä¸Šæ—¶ä¼šé€šè¿‡ eldoc è¿›è¡Œæ˜¾ç¤ºï¼Œä½¿ç”¨æ³¨é‡Šä½ å¯å§‹ç»ˆçœ‹åˆ°æ¨æ–­çš„ç±»å‹ã€‚ ä½¿ç”¨ <code>(setq lsp-rust-analyzer-server-display-inlay-hints t)</code> æ¥å¯ç”¨å®ƒä»¬ã€‚è¦çœŸæ­£çš„æ’å…¥æ¨æ–­çš„ç±»å‹åˆ°æºä»£ç ï¼Œä½ å¯ä»¥ç§»åŠ¨å…‰æ ‡åˆ°å®šä¹‰çš„å˜é‡å¹¶æ‰§è¡Œ <code>M-x lsp-execute-code-action</code> æˆ– <code>C-c C-c a</code>ã€‚</p>
<p>æ³¨æ„å®ƒä»¬å¯èƒ½å’Œ <code>lsp-ui-sideline-mode</code> äº¤äº’çš„ä¸æ˜¯å¾ˆå¥½ã€‚å¦‚æœä½ åªéœ€è¦æç¤ºè€Œæƒ³ç¦ç”¨è¾¹çº¿æ¨¡å¼ï¼ˆsideline modeï¼‰ï¼Œä½ å¯ä»¥ç»™ <code>rustic-mode-hook</code> æ·»åŠ  <code>(lsp-ui-sideline-enable nil)</code>ã€‚</p>
<h2 id="dai-ma-diao-shi">ä»£ç è°ƒè¯•</h2>
<p>Emacs é€šè¿‡ <a rel="noopener" target="_blank" href="https://emacs-lsp.github.io/dap-mode/">dap-mode</a> é›†æˆäº† gdb å’Œ lldbã€‚ä¸ºäº†è®¾ç½®æ”¯æŒ Rust è°ƒè¯•ï¼Œä½ éœ€è¦åšä¸€äº›é¢å¤–çš„é…ç½®å’Œæ„å»ºæ­¥éª¤ã€‚ç‰¹åˆ«æ˜¯ä½ éœ€è¦æœ‰ <code>lldb-mi</code>(https://github.com/lldb-tools/lldb-mi)ï¼Œå®ƒä¸åŒ…å«åœ¨ Apple é€šè¿‡ XCode æä¾›çš„å®˜æ–¹ llvm å‘è¡Œç‰ˆé‡Œã€‚</p>
<p>æˆ‘åªåœ¨ macOS ä¸Šæµ‹è¯•ç¼–è¯‘äº† <code>lldb-mi</code>ã€‚ä¸‹é¢æ˜¯æˆ‘çš„æ“ä½œæ­¥éª¤ï¼š</p>
<ol>
<li>é€šè¿‡ homebrew å®‰è£… llvm å’Œ cmake</li>
<li>æ£€å‡º lldb-mi ä»£ç åº“</li>
<li>æ„å»º lldb-mi å¯æ‰§è¡Œæ–‡ä»¶</li>
<li>å°†ç›®å½•é“¾æ¥åˆ°æˆ‘çš„ PATH</li>
</ol>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> brew install cmake llvm</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> git clone https://github.com/lldb-tools/lldb-mi</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> mkdir<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> lldb-mi/build</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> cd lldb-mi/build</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> cmake ..</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> cmake<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>build</span> .</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> ln<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>s</span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">PWD</span></span>/src/lldb-mi /usr/local/bin/lldb-mi</span>
</span></code></pre>
<p>ä¸ºäº†è®© Emacs èƒ½æ‰¾åˆ°å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½ éœ€è¦ç¡®ä¿ <code>exec-path</code> åœ¨å¯åŠ¨æ—¶æ˜¯æ­£ç¡®é…ç½®çš„ã€‚å®Œæ•´çš„ dap-mode é…ç½®å¦‚ä¸‹ï¼š</p>
<pre data-lang="lisp" class="language-lisp z-code"><code class="language-lisp" data-lang="lisp"><span class="z-source z-lisp"><span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">use-package</span> exec<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>path<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-keyword z-control z-lisp">from</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>shell
  :ensure
  : init <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>exec<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>path<span class="z-keyword z-operator z-arithmetic z-lisp">-</span><span class="z-keyword z-control z-lisp">from</span><span class="z-keyword z-operator z-arithmetic z-lisp">-</span>shell<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>initialize<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>

<span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">use-package</span> dap<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode
  :ensure
  :config
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>dap<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>ui<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>dap<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>ui<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>controls<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>mode <span class="z-constant z-numeric z-lisp">1</span><span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>

  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">require</span> &#39;dap<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>lldb<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">require</span> &#39;dap<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>gdb<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>lldb<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-comment z-line z-semicolon z-lisp"><span class="z-punctuation z-definition z-comment z-lisp">;</span>; å®‰è£… .extendsion/vscode
</span>  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>dap<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>gdb<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>lldb<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>setup<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span>dap<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>register<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>debug<span class="z-keyword z-operator z-arithmetic z-lisp">-</span>template
    <span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>Rust::LLDB Run Configuration<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span>
    <span class="z-meta z-group z-lisp"><span class="z-punctuation z-definition z-group z-begin z-lisp">(</span><span class="z-support z-function z-lisp">list</span> :type <span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>lldb<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span>
      :request <span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>launch<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span>
      :name <span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>LLDB::Run<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span>
      :gdbpath <span class="z-string z-quoted z-double z-lisp"><span class="z-punctuation z-definition z-string z-begin z-lisp">&quot;</span>rust-lldb<span class="z-punctuation z-definition z-string z-end z-lisp">&quot;</span></span>
      :target <span class="z-constant z-language z-lisp">nil</span>
      :cwd <span class="z-constant z-language z-lisp">nil</span>
    <span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
  <span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
<span class="z-punctuation z-definition z-group z-end z-lisp">)</span></span>
</span></code></pre>
<p><code>(dp-gdb-lldb-setup)</code> ä¼šå®‰è£…ä¸€ä¸ª VSCode æ‰©å±•åˆ° <code>user-emacs-dir/.extension/vscode/webfreak.debug</code> ç›®å½•ã€‚æˆ‘ç¢°åˆ°æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯è¿™ä¸ªå®‰è£…ä¸æ˜¯ç»å¸¸ä¼šæˆåŠŸã€‚å¦‚æœæœ€åä½ æ²¡æœ‰ &quot;<code>webfreak.debug</code>&quot; ç›®å½•ä½ å¯èƒ½éœ€è¦åˆ é™¤ <code>vscode/</code> ç›®å½•ç„¶åå†æ‰§è¡Œ <code>(dap-gdb-lldb-setup)</code>ã€‚</p>
<p>æˆ‘è¿˜éœ€è¦æ‰§è¡Œä¸€æ¬¡ <code>sudo DevToolSecurity --enable</code> æ¥å…è®¸è°ƒè¯•å™¨è®¿é—®è¿›ç¨‹ã€‚</p>
<p>å¦å¤–è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå½“æˆ‘å¯åŠ¨è°ƒè¯•ç›®æ ‡æ—¶æˆ‘ä¼šçœ‹åˆ°ï¼š</p>
<pre class="z-code"><code><span class="z-text z-plain">Could not start debugger process, does the program exist in filesystem?
Error: spawn lldb-mi ENOENT
</span></code></pre>
<p>å³ä½¿ <code>lldb-mi</code> åœ¨æˆ‘çš„ç¯å¢ƒå˜é‡å¹¶ä¸”æˆ‘å¯ä»¥åœ¨ Emacs é‡Œé¢å¯åŠ¨å®ƒã€‚ç»“æœè¡¨æ˜é”™è¯¯ä¸æ˜¯æ¥è‡ª <code>lldb-mi</code> è€Œæ˜¯ä½ å¯åŠ¨ç›®æ ‡çš„ç›®å½•ã€‚å½“ä½ ä½¿ç”¨ <code>M-x dap-debug</code> æˆ–é€šè¿‡ <code>dap-hydra d d</code> å¯åŠ¨è°ƒè¯•ï¼Œç„¶åé€‰æ‹© <code>Rust::LLDB Run Configuration</code> æ—¶ç¡®ä¿ä½ æƒ³è¦è°ƒè¯•çš„å¯æ‰§è¡Œç›®æ ‡çš„ç›®å½•ä¸æ˜¯ç›¸å¯¹è·¯å¾„ä¹Ÿä¸èƒ½åŒ…å« <code>~</code>ã€‚å¦‚æœæ˜¯ç»å¯¹è·¯å¾„å°±åº”è¯¥å¯ä»¥å·¥ä½œã€‚</p>
<p>å¦‚ä¸‹å¯èƒ½ä¼šå‘ç”Ÿä¸Šé¢é”™è¯¯çš„å¤±è´¥ï¼ˆæ³¨æ„æœªå±•å¼€çš„ <code>~/</code>ï¼‰ï¼š</p>
<p><img src="https://assets.oicnp.com/pic/dap-fail.png" alt="dap-fail" /></p>
<p>æˆ‘éœ€è¦æŒ‡å®šå®Œæ•´çš„è·¯å¾„ <code>/Users/robert/projects/rust/emacs/test-project/target/debug/test-project</code>ã€‚</p>
<p>ä¸€æ—¦æˆåŠŸæ‰§è¡Œçœ‹èµ·æ¥åº”è¯¥å¦‚ä¸‹ï¼š</p>
<video controls src="https://assets.oicnp.com/pic/emacs-debugging-dap.mp4" style="max-height: 620px" />
<p>ä¸Šé¢ç¤ºä¾‹æˆ‘é¦–å…ˆä½¿ç”¨ <code>C-c C-c d</code> æ¿€æ´» <code>dab-hydra</code>ã€‚ç„¶åä½¿ç”¨ <code>d d</code> é€‰æ‹© Rust è°ƒè¯•ç›®æ ‡ï¼ˆæå‰ä½¿ç”¨ cargo æ„å»ºçš„ï¼‰ã€‚åœ¨è¿™ä¹‹å‰è¿˜ç”¨ <code>d p</code> è®¾ç½®äº†ä¸€ä¸ªæ–­ç‚¹ã€‚ç„¶åæˆ‘ä½¿ç”¨ <code>n</code> å’Œ <code>i</code> åœ¨ä»£ç ä¸­æ­¥è¿›ã€‚æ³¨æ„ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨é¼ æ ‡è®¾ç½®æ–­ç‚¹å’Œæ­¥è¿›ã€‚</p>
<p>é…ç½®è°ƒè¯•å¹¶æ²¡æœ‰é¢„æœŸçš„é¡ºç•…ï¼Œä½†ä¸€æ—¦è¿è¡Œèµ·æ¥ä¼šéå¸¸æœ‰è¶£ï¼</p>
<h3 id="rust-playground">Rust playground</h3>
<p>ä½ æˆ–è®¸å·²ç»è§è¯†äº†åœ¨çº¿çš„ Rust playgroud <a rel="noopener" target="_blank" href="https://play.rust-lang.org/">https://play.rust-lang.org/</a>ï¼Œå¯ä»¥è®©å¿«é€Ÿè¿è¡Œå’Œåˆ†äº« Rust ä»£ç ç‰‡æ®µã€‚Emacs æœ‰ä¸€ä¸ªç±»ä¼¼çš„å…è®¸ä½ å¿«é€Ÿåˆ›å»ºï¼ˆæˆ–ç§»é™¤ï¼‰Rustè‰ç¨¿é¡¹ç›®çš„é¡¹ç›®æ˜¯ <code>[grafov/rust-playgroud](https://github.com/grafov/rust-playground)</code>ã€‚é»˜è®¤ <code>rust-playgroud</code> å‘½ä»¤ä¼šåœ¨ç›®å½• <code>~/.emacs.d/rust-playgroud/</code> åˆ›å»º Rust é¡¹ç›®ï¼Œå¹¶æ‰“å¼€ <code>main.rs</code>ï¼Œä½¿ç”¨ç»‘å®šçš„å¿«æ·é”®å¿«é€Ÿè¿è¡Œé¡¹ç›®(<code>C-c C-c</code>)ã€‚è¿™ä¸ªéå¸¸ä¾¿äºä½ å¿«é€Ÿæµ‹è¯• Rust ä»£ç ç‰‡æ®µæˆ–è°ƒè¯•ä¸€ä¸ªåº“ã€‚è¿™ä¸€åˆ‡éƒ½æ¥è‡ªäºä½ è‡ªå·±çš„ç¼–è¾‘å™¨ï¼</p>
<h3 id="fu-jia-bao">é™„åŠ åŒ…</h3>
<p>è¿™è¿˜æœ‰ä¸€äº› emacs åŒ…æœ¬æ–‡å°±ä¸å†ç»†è¯´äº†ï¼Œä¼šæå¤§çš„æå‡ä½¿ç”¨ Emacs è¿›è¡Œ Rust æˆ–å…¶å®ƒè¯­è¨€å¼€å‘çš„ä½“éªŒã€‚å¦‚ä¸‹ï¼š</p>
<ul>
<li><a rel="noopener" target="_blank" href="https://github.com/bbatsov/projectile">projectile</a>ï¼šå°†é¡¹ç›®çš„æ¦‚å¿µå¼•å…¥åˆ° emacs ä»¥åŠå¤§é‡ç›¸å…³æ“ä½œçš„å‘½ä»¤ã€‚å¦‚åœ¨é¡¹ç›®æ‰“å¼€ shellã€æœç´¢é¡¹ç›®ä»£ç ç­‰ã€‚</li>
<li><a rel="noopener" target="_blank" href="https://emacs-helm.github.io/helm/">helm</a>ã€<a rel="noopener" target="_blank" href="https://github.com/raxod502/selectrum">selctrum</a>ã€<a rel="noopener" target="_blank" href="https://github.com/abo-abo/swiper#ivy">ivy</a>ï¼šæˆ‘ä»¬èŠ±äº†å¾ˆå¤šæ—¶é—´ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªè¿˜æ˜¯å¤šä¸ªé€‰é¡¹ã€‚è®©å®ƒå¯ä»¥æ‰“å¼€æ–‡ä»¶ã€ç¼“å†²åŒºé—´åˆ‡æ¢æˆ–æ‰§è¡Œå‘½ä»¤ï¼ˆM-xï¼‰ã€‚æ‰€æœ‰è¿™äº›åŒ…è®©åœ¨ emacs ä¸­é€šè¿‡é”®ç›˜è¾“å…¥æ¥é€‰æ‹©é€‰é¡¹å˜å¾—ç®€å•ï¼Œå¹¶èƒ½å¤Ÿè¿‡æ»¤å¤§çš„åˆ—è¡¨ã€‚help æ˜¯æˆ‘ä¸ªäººçš„æ—¥å¸¸é©±åŠ¨ï¼Œä½† selectrum æ˜¯ä¸€ä¸ªæ›´è½»é‡çš„æ›¿ä»£ã€‚å®ƒä½¿ç”¨åœ¨ç›¸å…³çš„ github é¡¹ç›®çš„ standalone.el ç‰ˆæœ¬ä¸­ã€‚</li>
<li><a rel="noopener" target="_blank" href="https://depp.brause.cc/shackle/">shackle</a>ï¼šEmacs é»˜è®¤çš„çª—å£è§„åˆ™å¹¶ä¸æ˜¯æœ€ä¼˜çš„ã€‚Shakle å…è®¸å®šä¹‰åŒ¹é…ç¼“å†²åŒºåç§°çš„è§„åˆ™ã€‚æˆ‘é»˜è®¤çš„è§„åˆ™åœ¨<a rel="noopener" target="_blank" href="https://gist.github.com/rksm/8c07d9ccc9e15adf752d3dd73dd9a61e">è¿™ä¸ª gist</a>ã€‚</li>
<li><a rel="noopener" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Dired.html">dired</a>ï¼šå†…ç½®äº Emacsã€‚ä½ æœ€åéœ€è¦ä¸€ä¸ªæ–‡ä»¶ç®¡ç†å™¨ã€‚</li>
</ul>
<h2 id="gan-xie-zhe-xie-bao-de-kai-fa-zhe-men">æ„Ÿè°¢è¿™äº›åŒ…çš„å¼€å‘è€…ä»¬!</h2>
<p>æœ€åè¦è¯´å£°è°¢è°¢ï¼æ„Ÿè°¢æ‰€æœ‰æœ¬æ–‡ä¸­æåˆ°çš„å¼€æºè½¯ä»¶çš„å¼€å‘å’Œç»´æŠ¤è€…ä»¬ã€‚Rust-analyzer é¡¹ç›®æ˜¯ä»¤äººæƒŠå¹çš„ï¼Œå®ƒæå¤§çš„æ”¹å–„äº† Rust Emacs å·¥å…·çŠ¶æ€ã€‚å½“ç„¶ä¹Ÿç¦»ä¸å¼€éå¸¸æœ‰ç”¨çš„ lsp-mode å’Œ lsp-uiã€‚rustic ç®€åŒ–äº† rust-mode æ¨¡å¼ç›¸å…³çš„å¿…è¦é…ç½®ï¼Œå¹¶å¢åŠ äº†éå¸¸æœ‰ç”¨çš„ç‰¹æ€§ã€‚åœ¨å…¶å®ƒè¯­è¨€ company å’Œ flycheck æ˜¯æˆ‘çš„é»˜è®¤é…ç½®ã€‚å½“ç„¶è¿˜è¦æ„Ÿè°¢æ‰€æœ‰ Emacs çš„ç»´æŠ¤äººå‘˜ä»¥åŠæˆ‘è®°ä¸å¤ªæ¸…çš„å‚ä¸å…¶ä¸­çš„æ‰€æœ‰äººï¼</p>
<hr />
<ol>
<li><a rel="noopener" target="_blank" href="https://github.com/racer-rust/emacs-racer">Racer</a> æ›¾ç»æ˜¯é…ç½® Emacs IDEç‰¹æ€§ï¼ˆä»£ç å¯¼èˆªç­‰ï¼‰çš„æœ€ä½³é€‰æ‹©ã€‚å®ƒæ˜¯æ¯” RLS å’Œ rust-analyzer éƒ½å¿«çš„é LSP è§£å†³æ–¹æ¡ˆã€‚ç„¶è€Œæœ‰å¾ˆå¤šæœ‰å…³ä»£ç è¡¥å…¨çš„ç‰¹æ€§å·²ç»ä¸å¦‚ rust-analyzer äº†ã€‚</li>
<li>Emacs ä¹Ÿé€šè¿‡ <a rel="noopener" target="_blank" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/GDB-Graphical-Interface.html">GUD</a> å†…ç½®äº†å¯¹ gdb çš„æ”¯æŒï¼Œ ä½†éœ€è¦ç›´æ¥æ§åˆ¶ gdb è¿›ç¨‹ã€‚DAP æ›´ç±»ä¼¼äº LSPï¼Œå› ä¸ºå®ƒç”¨äºè¿œç¨‹æ§åˆ¶è°ƒè¯•è¿‡ç¨‹ï¼Œä½¿ç¼–è¾‘å™¨æ›´å®¹æ˜“é›†æˆå®ƒã€‚</li>
</ol>

<p><b><a href="#">è¿”å›é¡¶éƒ¨</a></b></p>
    </article>
    <div class="toc" aria-hidden="true">
      <div class="toc-sticky">
        <h3>ç›®å½•</h3>
        <div class="toc-item">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#kuai-su-kai-shi">å¿«é€Ÿå¼€å§‹</a>
        </div>
        <div class="toc-item">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#xian-jue-tiao-jian">å…ˆå†³æ¡ä»¶</a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#rust"><small>- Rust</small></a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#rust-analyzer"><small>- rust-analyzer</small></a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#emacs"><small>- Emacs</small></a>
        </div>
        <div class="toc-item">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#rust-emacs-xiang-xi-pei-zhi">Rust Emacs è¯¦ç»†é…ç½®</a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#rustic"><small>- Rustic</small></a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#lsp-mode-and-lsp-ui-mode"><small>- lsp-mode and lsp-ui-mode</small></a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#code-navigation"><small>- Code Navigation</small></a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#dai-ma-cao-zuo-code-actions"><small>- ä»£ç æ“ä½œï¼ˆCode Actionsï¼‰</small></a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#dai-ma-bu-quan-he-pian-duan-code-completion-and-snippets"><small>- ä»£ç è¡¥å…¨å’Œç‰‡æ®µï¼ˆCode completion and snippetsï¼‰</small></a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#xing-nei-cuo-wu"><small>- è¡Œå†…é”™è¯¯</small></a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#xing-nei-lei-xing-ti-shi"><small>- è¡Œå†…ç±»å‹æç¤º</small></a>
        </div>
        <div class="toc-item">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#dai-ma-diao-shi">ä»£ç è°ƒè¯•</a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#rust-playground"><small>- Rust playground</small></a>
        </div>
        <div class="toc-item-child">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#fu-jia-bao"><small>- é™„åŠ åŒ…</small></a>
        </div>
        <div class="toc-item">
          <a class="subtext" href="https://aqrun.com/rust/rust-with-emacs/#gan-xie-zhe-xie-bao-de-kai-fa-zhe-men">æ„Ÿè°¢è¿™äº›åŒ…çš„å¼€å‘è€…ä»¬!</a>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <hr />
    <div class="c">
      <nav>
        <ul><li><a href="https://aqrun.com/atom.xml" target="_blank" title="Atom/RSS Feed"><i type="Button" class="svg rss" title="Atom/RSS Feed"></i></a></li><li class="js"><a class="m-protected" href="#YXFydW5Ac2luYS5jb20=" target="_blank" title="Mail"><i type="Button" class="svg mail" title="Mail"></i></a></li><li><a href="https://github.com/aqrun/" target="_blank" title="Github"><i type="Button" class="svg github" title="Github"></i></a></li></ul>
      </nav>
      <p class="s90">Copyright &copy; 2014-2023 å…‰é¹¿è·‘å†°</p>
      <nav>
        <ul><li class="s90"> <a href="https://aqrun.com/about/"> å…³äºæˆ‘ </a> </li><li class="s90"> <a href="https://aqrun.com/contact/"> è”ç³»æˆ‘ </a> </li><li class="s90"> <a href="https://aqrun.com/privacy/"> ä¿æŠ¤æƒç›Š </a> </li><li class="s90"> <a href="https://aqrun.com/sitemap.xml" target="_blank"> ç½‘ç«™åœ°å›¾ </a> </li></ul>
      </nav>
      <p class="s90">Powered by <a href="https://www.getzola.org/" target="_blank">Zola</a> å’Œ <a href="https://github.com/jieiku/abridge/" target="_blank">Abridge</a></p>
    </div>
  </footer>
<span class="topout">
    <span class="topleft"> </span>
    <a href="#" class="top" title="Back to Top">
        <i class="svgs svgh angu"></i>
    </a>
</span>
</body>
</html>